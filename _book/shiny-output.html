<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 14 Custom Outputs | JavaScript for R</title>
  <meta name="description" content="Invite JavaScript into your Data Science workflow." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 14 Custom Outputs | JavaScript for R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Invite JavaScript into your Data Science workflow." />
  <meta name="github-repo" content="JohnCoene/javascript-for-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 14 Custom Outputs | JavaScript for R" />
  
  <meta name="twitter:description" content="Invite JavaScript into your Data Science workflow." />
  

<meta name="author" content="John Coene" />


<meta name="date" content="2021-04-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="shiny-tips.html"/>
<link rel="next" href="shiny-input.html"/>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<script src="libs/core-js-2.5.3/shim.min.js"></script>
<script src="libs/react-16.12.0/react.min.js"></script>
<script src="libs/react-16.12.0/react-dom.min.js"></script>
<script src="libs/reactwidget-1.0.0/react-tools.js"></script>
<script src="libs/reactable-binding-0.2.3/reactable.js"></script>
<script src="libs/r2d3-render-0.1.0/r2d3-render.js"></script>
<script src="libs/webcomponents-2.0.0/webcomponents.js"></script>
<script src="libs/r2d3-binding-0.2.5/r2d3.js"></script>
<script src="libs/d3v6-6.2.0/d3.min.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.17/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-74544116-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-74544116-1');
</script>
<meta property="og:title" content="Chapter 14 Custom Outputs | JavaScript for R">
<meta property="og:description" content="Book on using JavaScript with R for visualisations, web development, and computations.">
<meta property="og:image" content="https://book.javascript-for-r.com/images/social.png">
<meta property="og:url" content="https://book.javascript-for-r.com/">
<meta name="twitter:card" content="summary_large_image">
<meta property="og:site_name" content="Chapter 14 Custom Outputs | JavaScript for R">
<meta name="twitter:image:alt" content="Book on using JavaScript with R for visualisations, web development, and computations.">
<meta name="twitter:site" content="@jdatap">


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">JavaScript for R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#premise"><i class="fa fa-check"></i>Premise</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#book-structure"><i class="fa fa-check"></i>Book Structure</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgement"><i class="fa fa-check"></i>Acknowledgement</a></li>
</ul></li>
<li class="part"><span><b>I Basics and Roadmap</b></span></li>
<li class="chapter" data-level="1" data-path="intro-overview.html"><a href="intro-overview.html"><i class="fa fa-check"></i><b>1</b> Overview</a><ul>
<li class="chapter" data-level="1.1" data-path="intro-overview.html"><a href="intro-overview.html#intro-overview-rationale"><i class="fa fa-check"></i><b>1.1</b> Rationale</a></li>
<li class="chapter" data-level="1.2" data-path="intro-overview.html"><a href="intro-overview.html#intro-methods"><i class="fa fa-check"></i><b>1.2</b> Methods</a><ul>
<li class="chapter" data-level="1.2.1" data-path="intro-overview.html"><a href="intro-overview.html#intro-v8"><i class="fa fa-check"></i><b>1.2.1</b> V8</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro-overview.html"><a href="intro-overview.html#intro-htmlwidgets"><i class="fa fa-check"></i><b>1.2.2</b> htmlwidgets</a></li>
<li class="chapter" data-level="1.2.3" data-path="intro-overview.html"><a href="intro-overview.html#intro-shiny"><i class="fa fa-check"></i><b>1.2.3</b> Shiny</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro-overview.html"><a href="intro-overview.html#intro-amiss"><i class="fa fa-check"></i><b>1.3</b> Methods Amiss</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro-overview.html"><a href="intro-overview.html#intro-reactr-vuer"><i class="fa fa-check"></i><b>1.3.1</b> reactR &amp; vueR</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro-overview.html"><a href="intro-overview.html#intro-r2d3"><i class="fa fa-check"></i><b>1.3.2</b> r2d3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="prerequisites.html"><a href="prerequisites.html"><i class="fa fa-check"></i><b>2</b> Prerequisites</a><ul>
<li class="chapter" data-level="2.1" data-path="prerequisites.html"><a href="prerequisites.html#basics-package-dev"><i class="fa fa-check"></i><b>2.1</b> R Package Development</a><ul>
<li class="chapter" data-level="2.1.1" data-path="prerequisites.html"><a href="prerequisites.html#basics-create-pkg"><i class="fa fa-check"></i><b>2.1.1</b> Creating a Package</a></li>
<li class="chapter" data-level="2.1.2" data-path="prerequisites.html"><a href="prerequisites.html#basics-metadata"><i class="fa fa-check"></i><b>2.1.2</b> Metadata</a></li>
<li class="chapter" data-level="2.1.3" data-path="prerequisites.html"><a href="prerequisites.html#basics-r-code"><i class="fa fa-check"></i><b>2.1.3</b> R code</a></li>
<li class="chapter" data-level="2.1.4" data-path="prerequisites.html"><a href="prerequisites.html#basics-documentation"><i class="fa fa-check"></i><b>2.1.4</b> Documentation</a></li>
<li class="chapter" data-level="2.1.5" data-path="prerequisites.html"><a href="prerequisites.html#basics-installed-files"><i class="fa fa-check"></i><b>2.1.5</b> Installed files</a></li>
<li class="chapter" data-level="2.1.6" data-path="prerequisites.html"><a href="prerequisites.html#basics-build-load-install"><i class="fa fa-check"></i><b>2.1.6</b> Build, load, and install</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="prerequisites.html"><a href="prerequisites.html#basics-json"><i class="fa fa-check"></i><b>2.2</b> JSON</a><ul>
<li class="chapter" data-level="2.2.1" data-path="prerequisites.html"><a href="prerequisites.html#serialising"><i class="fa fa-check"></i><b>2.2.1</b> Serialising</a></li>
<li class="chapter" data-level="2.2.2" data-path="prerequisites.html"><a href="prerequisites.html#basics-tabular"><i class="fa fa-check"></i><b>2.2.2</b> Tabular Data</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="prerequisites.html"><a href="prerequisites.html#basics-javascript"><i class="fa fa-check"></i><b>2.3</b> JavaScript</a><ul>
<li class="chapter" data-level="2.3.1" data-path="prerequisites.html"><a href="prerequisites.html#basics-chrome-devtools"><i class="fa fa-check"></i><b>2.3.1</b> Developer Tools</a></li>
<li class="chapter" data-level="2.3.2" data-path="prerequisites.html"><a href="prerequisites.html#basics-var-scope"><i class="fa fa-check"></i><b>2.3.2</b> Variable Declaration and Scope</a></li>
<li class="chapter" data-level="2.3.3" data-path="prerequisites.html"><a href="prerequisites.html#basics-object-model"><i class="fa fa-check"></i><b>2.3.3</b> Document Object Model</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="prerequisites.html"><a href="prerequisites.html#basics-shiny"><i class="fa fa-check"></i><b>2.4</b> Shiny</a><ul>
<li class="chapter" data-level="2.4.1" data-path="prerequisites.html"><a href="prerequisites.html#basics-static-files"><i class="fa fa-check"></i><b>2.4.1</b> Serving Static Files</a></li>
<li class="chapter" data-level="2.4.2" data-path="prerequisites.html"><a href="prerequisites.html#basics-htmltools"><i class="fa fa-check"></i><b>2.4.2</b> Htmltools</a></li>
<li class="chapter" data-level="2.4.3" data-path="prerequisites.html"><a href="prerequisites.html#basics-deps-pro-cons"><i class="fa fa-check"></i><b>2.4.3</b> Serving vs. htmltools</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Data Visualisation</b></span></li>
<li class="chapter" data-level="3" data-path="widgets-intro-intro.html"><a href="widgets-intro-intro.html"><i class="fa fa-check"></i><b>3</b> Introduction to Widgets</a><ul>
<li class="chapter" data-level="3.1" data-path="widgets-intro-intro.html"><a href="widgets-intro-intro.html#widgets-plotly"><i class="fa fa-check"></i><b>3.1</b> Plotly package</a></li>
<li class="chapter" data-level="3.2" data-path="widgets-intro-intro.html"><a href="widgets-intro-intro.html#widgets-intro-dt"><i class="fa fa-check"></i><b>3.2</b> DT package</a></li>
<li class="chapter" data-level="3.3" data-path="widgets-intro-intro.html"><a href="widgets-intro-intro.html#widgets-intro-crosstalk"><i class="fa fa-check"></i><b>3.3</b> Crosstalk</a></li>
<li class="chapter" data-level="3.4" data-path="widgets-intro-intro.html"><a href="widgets-intro-intro.html#widgets-intro-conclude"><i class="fa fa-check"></i><b>3.4</b> Wrap-up</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="widgets-basics.html"><a href="widgets-basics.html"><i class="fa fa-check"></i><b>4</b> Basics of Building Widgets</a><ul>
<li class="chapter" data-level="4.1" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-study"><i class="fa fa-check"></i><b>4.1</b> Read and Study</a></li>
<li class="chapter" data-level="4.2" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-candidates"><i class="fa fa-check"></i><b>4.2</b> Candidate Libraries</a><ul>
<li class="chapter" data-level="4.2.1" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-candidates-plotly"><i class="fa fa-check"></i><b>4.2.1</b> Plotly.js</a></li>
<li class="chapter" data-level="4.2.2" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-candidates-highcharts"><i class="fa fa-check"></i><b>4.2.2</b> Highchart.js</a></li>
<li class="chapter" data-level="4.2.3" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-candidates-chart.js"><i class="fa fa-check"></i><b>4.2.3</b> Chart.js</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-inner-workings"><i class="fa fa-check"></i><b>4.3</b> How It Works</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="widgets-first.html"><a href="widgets-first.html"><i class="fa fa-check"></i><b>5</b> Your First Widget</a><ul>
<li class="chapter" data-level="5.1" data-path="widgets-first.html"><a href="widgets-first.html#widgets-first-scaffold"><i class="fa fa-check"></i><b>5.1</b> The Scaffold</a></li>
<li class="chapter" data-level="5.2" data-path="widgets-first.html"><a href="widgets-first.html#widgets-first-htmloutput"><i class="fa fa-check"></i><b>5.2</b> The HTML Output</a></li>
<li class="chapter" data-level="5.3" data-path="widgets-first.html"><a href="widgets-first.html#widgets-first-js-files"><i class="fa fa-check"></i><b>5.3</b> JavaScript Files</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="widgets-realistic.html"><a href="widgets-realistic.html"><i class="fa fa-check"></i><b>6</b> A Realistic Widget</a><ul>
<li class="chapter" data-level="6.1" data-path="widgets-realistic.html"><a href="widgets-realistic.html#widgets-realistic-deps"><i class="fa fa-check"></i><b>6.1</b> Dependencies</a></li>
<li class="chapter" data-level="6.2" data-path="widgets-realistic.html"><a href="widgets-realistic.html#widgets-realistic-implementation"><i class="fa fa-check"></i><b>6.2</b> Implementation</a></li>
<li class="chapter" data-level="6.3" data-path="widgets-realistic.html"><a href="widgets-realistic.html#widgets-realistic-html-element"><i class="fa fa-check"></i><b>6.3</b> HTML Element</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="widgets-full.html"><a href="widgets-full.html"><i class="fa fa-check"></i><b>7</b> The Full Monty</a><ul>
<li class="chapter" data-level="7.1" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-deps"><i class="fa fa-check"></i><b>7.1</b> Dependencies</a></li>
<li class="chapter" data-level="7.2" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-js"><i class="fa fa-check"></i><b>7.2</b> JavaScript</a></li>
<li class="chapter" data-level="7.3" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-data"><i class="fa fa-check"></i><b>7.3</b> Working with Data</a></li>
<li class="chapter" data-level="7.4" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data"><i class="fa fa-check"></i><b>7.4</b> Transforming Data</a><ul>
<li class="chapter" data-level="7.4.1" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data-js"><i class="fa fa-check"></i><b>7.4.1</b> Using JavaScript</a></li>
<li class="chapter" data-level="7.4.2" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data-modify"><i class="fa fa-check"></i><b>7.4.2</b> Modify Serialiser</a></li>
<li class="chapter" data-level="7.4.3" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data-replace"><i class="fa fa-check"></i><b>7.4.3</b> Replace Serialiser</a></li>
<li class="chapter" data-level="7.4.4" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data-modify-data"><i class="fa fa-check"></i><b>7.4.4</b> Modify the Data</a></li>
<li class="chapter" data-level="7.4.5" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data-conclusion"><i class="fa fa-check"></i><b>7.4.5</b> Pros and Cons</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-on-print"><i class="fa fa-check"></i><b>7.5</b> On Print Method</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="widgets-adv.html"><a href="widgets-adv.html"><i class="fa fa-check"></i><b>8</b> Advanced Topics</a><ul>
<li class="chapter" data-level="8.1" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-shared"><i class="fa fa-check"></i><b>8.1</b> Shared Variables</a><ul>
<li class="chapter" data-level="8.1.1" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-sizing"><i class="fa fa-check"></i><b>8.1.1</b> Sizing</a></li>
<li class="chapter" data-level="8.1.2" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-sizing-policy"><i class="fa fa-check"></i><b>8.1.2</b> Sizing Policy</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-resizing"><i class="fa fa-check"></i><b>8.2</b> Resizing</a></li>
<li class="chapter" data-level="8.3" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-prerender"><i class="fa fa-check"></i><b>8.3</b> Pre Render Hooks and Security</a></li>
<li class="chapter" data-level="8.4" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-js"><i class="fa fa-check"></i><b>8.4</b> JavaScript Code</a></li>
<li class="chapter" data-level="8.5" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-prepend-append"><i class="fa fa-check"></i><b>8.5</b> Prepend and Append Content</a></li>
<li class="chapter" data-level="8.6" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-dependencies"><i class="fa fa-check"></i><b>8.6</b> Dependencies</a></li>
<li class="chapter" data-level="8.7" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-compatibility"><i class="fa fa-check"></i><b>8.7</b> Compatibility</a></li>
<li class="chapter" data-level="8.8" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-unit-tests"><i class="fa fa-check"></i><b>8.8</b> Unit Tests</a></li>
<li class="chapter" data-level="8.9" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-performances"><i class="fa fa-check"></i><b>8.9</b> Performances</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="linking-widgets.html"><a href="linking-widgets.html"><i class="fa fa-check"></i><b>9</b> Linking Widgets</a><ul>
<li class="chapter" data-level="9.1" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-examples"><i class="fa fa-check"></i><b>9.1</b> Crosstalk Examples</a></li>
<li class="chapter" data-level="9.2" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-req"><i class="fa fa-check"></i><b>9.2</b> Crosstalk Requirements</a></li>
<li class="chapter" data-level="9.3" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-inner-workings"><i class="fa fa-check"></i><b>9.3</b> How it Works</a><ul>
<li class="chapter" data-level="9.3.1" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-keys"><i class="fa fa-check"></i><b>9.3.1</b> Keys</a></li>
<li class="chapter" data-level="9.3.2" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-communication-lines"><i class="fa fa-check"></i><b>9.3.2</b> Communication Lines</a></li>
<li class="chapter" data-level="9.3.3" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-groups"><i class="fa fa-check"></i><b>9.3.3</b> Groups</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-gio"><i class="fa fa-check"></i><b>9.4</b> Crosstalk with Gio</a></li>
<li class="chapter" data-level="9.5" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-r"><i class="fa fa-check"></i><b>9.5</b> R code</a></li>
<li class="chapter" data-level="9.6" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-js"><i class="fa fa-check"></i><b>9.6</b> JavaScript Code</a><ul>
<li class="chapter" data-level="9.6.1" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-send-keys"><i class="fa fa-check"></i><b>9.6.1</b> Send Selected Keys</a></li>
<li class="chapter" data-level="9.6.2" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-set-keys"><i class="fa fa-check"></i><b>9.6.2</b> Set Selected Keys</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-using"><i class="fa fa-check"></i><b>9.7</b> Using Crosstalk with Gio</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="widgets-final.html"><a href="widgets-final.html"><i class="fa fa-check"></i><b>10</b> Final Revisions</a><ul>
<li class="chapter" data-level="10.1" data-path="widgets-final.html"><a href="widgets-final.html#widgets-final-data"><i class="fa fa-check"></i><b>10.1</b> Htmlwidgets and Data</a></li>
<li class="chapter" data-level="10.2" data-path="widgets-final.html"><a href="widgets-final.html#widgets-final-options"><i class="fa fa-check"></i><b>10.2</b> Plethora of Options</a></li>
<li class="chapter" data-level="10.3" data-path="widgets-final.html"><a href="widgets-final.html#widgets-final-interface"><i class="fa fa-check"></i><b>10.3</b> Interface Design</a></li>
<li class="chapter" data-level="10.4" data-path="widgets-final.html"><a href="widgets-final.html#widgets-final-exercises"><i class="fa fa-check"></i><b>10.4</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>III Web Development with Shiny</b></span></li>
<li class="chapter" data-level="11" data-path="shiny-intro.html"><a href="shiny-intro.html"><i class="fa fa-check"></i><b>11</b> Bidirectional Communication</a><ul>
<li class="chapter" data-level="11.1" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-websocket"><i class="fa fa-check"></i><b>11.1</b> WebSocket an Shiny</a></li>
<li class="chapter" data-level="11.2" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-sessions"><i class="fa fa-check"></i><b>11.2</b> Sessions</a></li>
<li class="chapter" data-level="11.3" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-example"><i class="fa fa-check"></i><b>11.3</b> Alerts, an example</a><ul>
<li class="chapter" data-level="11.3.1" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-explore"><i class="fa fa-check"></i><b>11.3.1</b> Explore</a></li>
<li class="chapter" data-level="11.3.2" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-r-to-js"><i class="fa fa-check"></i><b>11.3.2</b> From R to JavaScript</a></li>
<li class="chapter" data-level="11.3.3" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-serialise"><i class="fa fa-check"></i><b>11.3.3</b> Serialisation</a></li>
<li class="chapter" data-level="11.3.4" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-js2r"><i class="fa fa-check"></i><b>11.3.4</b> JavaScript to R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="shiny-complete.html"><a href="shiny-complete.html"><i class="fa fa-check"></i><b>12</b> A Complete Integration</a><ul>
<li class="chapter" data-level="12.1" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-discover"><i class="fa fa-check"></i><b>12.1</b> Discover</a></li>
<li class="chapter" data-level="12.2" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-setup"><i class="fa fa-check"></i><b>12.2</b> Setup</a></li>
<li class="chapter" data-level="12.3" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-dependencies"><i class="fa fa-check"></i><b>12.3</b> Dependencies</a></li>
<li class="chapter" data-level="12.4" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-images"><i class="fa fa-check"></i><b>12.4</b> Static Files</a></li>
<li class="chapter" data-level="12.5" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-skeleton"><i class="fa fa-check"></i><b>12.5</b> Skeleton</a></li>
<li class="chapter" data-level="12.6" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-r2js"><i class="fa fa-check"></i><b>12.6</b> From R to JavaScript</a></li>
<li class="chapter" data-level="12.7" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-js2r"><i class="fa fa-check"></i><b>12.7</b> From JavaScript to R</a></li>
<li class="chapter" data-level="12.8" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-input-handler"><i class="fa fa-check"></i><b>12.8</b> Input handler</a></li>
<li class="chapter" data-level="12.9" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg"><i class="fa fa-check"></i><b>12.9</b> As a Package</a><ul>
<li class="chapter" data-level="12.9.1" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg-deps"><i class="fa fa-check"></i><b>12.9.1</b> Dependencies</a></li>
<li class="chapter" data-level="12.9.2" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg-trigger"><i class="fa fa-check"></i><b>12.9.2</b> Trigger classification</a></li>
<li class="chapter" data-level="12.9.3" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg-js-code"><i class="fa fa-check"></i><b>12.9.3</b> JavaScript code</a></li>
<li class="chapter" data-level="12.9.4" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg-input-handler"><i class="fa fa-check"></i><b>12.9.4</b> Input handler</a></li>
<li class="chapter" data-level="12.9.5" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg-test"><i class="fa fa-check"></i><b>12.9.5</b> Test</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="shiny-tips.html"><a href="shiny-tips.html"><i class="fa fa-check"></i><b>13</b> Tips and Tricks</a><ul>
<li class="chapter" data-level="13.1" data-path="shiny-tips.html"><a href="shiny-tips.html#shiny-tips-events"><i class="fa fa-check"></i><b>13.1</b> Shiny Events</a></li>
<li class="chapter" data-level="13.2" data-path="shiny-tips.html"><a href="shiny-tips.html#shiny-tips-table-btn"><i class="fa fa-check"></i><b>13.2</b> Table Buttons</a></li>
<li class="chapter" data-level="13.3" data-path="shiny-tips.html"><a href="shiny-tips.html#shiny-tips-jQuery"><i class="fa fa-check"></i><b>13.3</b> jQuery</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="shiny-output.html"><a href="shiny-output.html"><i class="fa fa-check"></i><b>14</b> Custom Outputs</a><ul>
<li class="chapter" data-level="14.1" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-inner-workings"><i class="fa fa-check"></i><b>14.1</b> Inner-workings</a></li>
<li class="chapter" data-level="14.2" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-setup"><i class="fa fa-check"></i><b>14.2</b> Setup</a></li>
<li class="chapter" data-level="14.3" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-r-fun"><i class="fa fa-check"></i><b>14.3</b> Output R Function</a></li>
<li class="chapter" data-level="14.4" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-html"><i class="fa fa-check"></i><b>14.4</b> Generate Output HTML</a></li>
<li class="chapter" data-level="14.5" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-renderer"><i class="fa fa-check"></i><b>14.5</b> Output Renderer</a></li>
<li class="chapter" data-level="14.6" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-binding"><i class="fa fa-check"></i><b>14.6</b> JavaScript Output Binding</a><ul>
<li class="chapter" data-level="14.6.1" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-boxxy-title"><i class="fa fa-check"></i><b>14.6.1</b> Boxxy Title</a></li>
<li class="chapter" data-level="14.6.2" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-boxxy-value"><i class="fa fa-check"></i><b>14.6.2</b> Boxxy Value</a></li>
<li class="chapter" data-level="14.6.3" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-boxxy-bg-color"><i class="fa fa-check"></i><b>14.6.3</b> Boxxy Background Color</a></li>
<li class="chapter" data-level="14.6.4" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-register"><i class="fa fa-check"></i><b>14.6.4</b> Register the Output Binding</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-usage"><i class="fa fa-check"></i><b>14.7</b> Boxxy Usage</a></li>
<li class="chapter" data-level="14.8" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-inject"><i class="fa fa-check"></i><b>14.8</b> Injecting Dependencies</a></li>
<li class="chapter" data-level="14.9" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-preprocess"><i class="fa fa-check"></i><b>14.9</b> Preprocessing Custom Outputs</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="shiny-input.html"><a href="shiny-input.html"><i class="fa fa-check"></i><b>15</b> Custom Inputs</a><ul>
<li class="chapter" data-level="15.1" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-setup"><i class="fa fa-check"></i><b>15.1</b> Setup</a></li>
<li class="chapter" data-level="15.2" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-intro"><i class="fa fa-check"></i><b>15.2</b> Switch Input HTML and Style</a></li>
<li class="chapter" data-level="15.3" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-html"><i class="fa fa-check"></i><b>15.3</b> Generate Input HTML</a></li>
<li class="chapter" data-level="15.4" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-binding"><i class="fa fa-check"></i><b>15.4</b> JavaScript Input Binding</a><ul>
<li class="chapter" data-level="15.4.1" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-find"><i class="fa fa-check"></i><b>15.4.1</b> Find Inputs</a></li>
<li class="chapter" data-level="15.4.2" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-get-id"><i class="fa fa-check"></i><b>15.4.2</b> Get Input Id</a></li>
<li class="chapter" data-level="15.4.3" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-get-value"><i class="fa fa-check"></i><b>15.4.3</b> Get Input Value</a></li>
<li class="chapter" data-level="15.4.4" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-set-value"><i class="fa fa-check"></i><b>15.4.4</b> Set Input Value</a></li>
<li class="chapter" data-level="15.4.5" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-receive-msg"><i class="fa fa-check"></i><b>15.4.5</b> Receive Input Messages</a></li>
<li class="chapter" data-level="15.4.6" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-sub-unsub"><i class="fa fa-check"></i><b>15.4.6</b> Subscribe and Unsubscribe Inputs</a></li>
<li class="chapter" data-level="15.4.7" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-rate-policy"><i class="fa fa-check"></i><b>15.4.7</b> Input Rate Policy</a></li>
<li class="chapter" data-level="15.4.8" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-register"><i class="fa fa-check"></i><b>15.4.8</b> Registering the Input Binding</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-update"><i class="fa fa-check"></i><b>15.5</b> Update Input</a></li>
<li class="chapter" data-level="15.6" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-excercise"><i class="fa fa-check"></i><b>15.6</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="shiny-cookies.html"><a href="shiny-cookies.html"><i class="fa fa-check"></i><b>16</b> Cookies</a><ul>
<li class="chapter" data-level="16.1" data-path="shiny-cookies.html"><a href="shiny-cookies.html#shiny-cookies-discover"><i class="fa fa-check"></i><b>16.1</b> Discover js-cookie</a></li>
<li class="chapter" data-level="16.2" data-path="shiny-cookies.html"><a href="shiny-cookies.html#shiny-cookies-setup"><i class="fa fa-check"></i><b>16.2</b> Setup Project</a></li>
<li class="chapter" data-level="16.3" data-path="shiny-cookies.html"><a href="shiny-cookies.html#shiny-cookies-javascript"><i class="fa fa-check"></i><b>16.3</b> JavaScript Cookies</a></li>
<li class="chapter" data-level="16.4" data-path="shiny-cookies.html"><a href="shiny-cookies.html#shiny-cookies-r-code"><i class="fa fa-check"></i><b>16.4</b> R Code</a></li>
<li class="chapter" data-level="16.5" data-path="shiny-cookies.html"><a href="shiny-cookies.html#shiny-cookies-exercises"><i class="fa fa-check"></i><b>16.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="shiny-widgets.html"><a href="shiny-widgets.html"><i class="fa fa-check"></i><b>17</b> Widgets with Shiny</a><ul>
<li class="chapter" data-level="17.1" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-to-r"><i class="fa fa-check"></i><b>17.1</b> Widgets to R</a></li>
<li class="chapter" data-level="17.2" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-handlers"><i class="fa fa-check"></i><b>17.2</b> Input Handlers for Widgets</a></li>
<li class="chapter" data-level="17.3" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-r-to-widgets"><i class="fa fa-check"></i><b>17.3</b> R to Widgets</a><ul>
<li class="chapter" data-level="17.3.1" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-send-data"><i class="fa fa-check"></i><b>17.3.1</b> Send Data from Widgets</a></li>
<li class="chapter" data-level="17.3.2" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-retrieve"><i class="fa fa-check"></i><b>17.3.2</b> Retrieve Widget Instance</a></li>
<li class="chapter" data-level="17.3.3" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-handle-data"><i class="fa fa-check"></i><b>17.3.3</b> Handle Data</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-proxy"><i class="fa fa-check"></i><b>17.4</b> Proxy Function</a></li>
<li class="chapter" data-level="17.5" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-clear-data"><i class="fa fa-check"></i><b>17.5</b> Clear Data</a></li>
<li class="chapter" data-level="17.6" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-update"><i class="fa fa-check"></i><b>17.6</b> Update the Widget</a></li>
</ul></li>
<li class="part"><span><b>IV JavaScript for Computations</b></span></li>
<li class="chapter" data-level="18" data-path="v8.html"><a href="v8.html"><i class="fa fa-check"></i><b>18</b> The V8 Engine</a><ul>
<li class="chapter" data-level="18.1" data-path="v8.html"><a href="v8.html#v8-installation"><i class="fa fa-check"></i><b>18.1</b> Installation</a></li>
<li class="chapter" data-level="18.2" data-path="v8.html"><a href="v8.html#v8-basics"><i class="fa fa-check"></i><b>18.2</b> Basics</a></li>
<li class="chapter" data-level="18.3" data-path="v8.html"><a href="v8.html#v8-external"><i class="fa fa-check"></i><b>18.3</b> External Libraries</a></li>
<li class="chapter" data-level="18.4" data-path="v8.html"><a href="v8.html#v8-npm"><i class="fa fa-check"></i><b>18.4</b> NPM Packages</a></li>
<li class="chapter" data-level="18.5" data-path="v8.html"><a href="v8.html#v8-pkg"><i class="fa fa-check"></i><b>18.5</b> Use in Packages</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="v8-ml.html"><a href="v8-ml.html"><i class="fa fa-check"></i><b>19</b> Machine Learning</a><ul>
<li class="chapter" data-level="19.1" data-path="v8-ml.html"><a href="v8-ml.html#v8-ml-dependency"><i class="fa fa-check"></i><b>19.1</b> Dependency</a></li>
<li class="chapter" data-level="19.2" data-path="v8-ml.html"><a href="v8-ml.html#v8-ml-regression"><i class="fa fa-check"></i><b>19.2</b> Simple Regression</a></li>
<li class="chapter" data-level="19.3" data-path="v8-ml.html"><a href="v8-ml.html#v8-ml-exercises"><i class="fa fa-check"></i><b>19.3</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>V Robust JavaScript</b></span></li>
<li class="chapter" data-level="20" data-path="webpack-intro.html"><a href="webpack-intro.html"><i class="fa fa-check"></i><b>20</b> Managing JavaScript</a><ul>
<li class="chapter" data-level="20.1" data-path="webpack-intro.html"><a href="webpack-intro.html#webpack-example"><i class="fa fa-check"></i><b>20.1</b> Example</a></li>
<li class="chapter" data-level="20.2" data-path="webpack-intro.html"><a href="webpack-intro.html#webpack-browser"><i class="fa fa-check"></i><b>20.2</b> Transpiling</a></li>
<li class="chapter" data-level="20.3" data-path="webpack-intro.html"><a href="webpack-intro.html#webpack-minification"><i class="fa fa-check"></i><b>20.3</b> Minification</a></li>
<li class="chapter" data-level="20.4" data-path="webpack-intro.html"><a href="webpack-intro.html#webpack-structure"><i class="fa fa-check"></i><b>20.4</b> Bundling and Modules</a></li>
<li class="chapter" data-level="20.5" data-path="webpack-intro.html"><a href="webpack-intro.html#webpack-decouple"><i class="fa fa-check"></i><b>20.5</b> Decoupling</a></li>
<li class="chapter" data-level="20.6" data-path="webpack-intro.html"><a href="webpack-intro.html#webpack-npm"><i class="fa fa-check"></i><b>20.6</b> NPM</a></li>
<li class="chapter" data-level="20.7" data-path="webpack-intro.html"><a href="webpack-intro.html#webpack-conclude"><i class="fa fa-check"></i><b>20.7</b> With R</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html"><i class="fa fa-check"></i><b>21</b> Discover Webpack and NPM</a><ul>
<li class="chapter" data-level="21.1" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-install"><i class="fa fa-check"></i><b>21.1</b> Installation</a><ul>
<li class="chapter" data-level="21.1.1" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-install-mac"><i class="fa fa-check"></i><b>21.1.1</b> Mac OS</a></li>
<li class="chapter" data-level="21.1.2" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-install-ubuntu"><i class="fa fa-check"></i><b>21.1.2</b> Ubuntu</a></li>
<li class="chapter" data-level="21.1.3" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-install-windows"><i class="fa fa-check"></i><b>21.1.3</b> Windows</a></li>
<li class="chapter" data-level="21.1.4" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-install-other"><i class="fa fa-check"></i><b>21.1.4</b> Other</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-setup"><i class="fa fa-check"></i><b>21.2</b> Set Up the App</a></li>
<li class="chapter" data-level="21.3" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-init-npm"><i class="fa fa-check"></i><b>21.3</b> Initialise NPM</a></li>
<li class="chapter" data-level="21.4" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-install-pkgs"><i class="fa fa-check"></i><b>21.4</b> Installing NPM Packages</a></li>
<li class="chapter" data-level="21.5" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-entry-points"><i class="fa fa-check"></i><b>21.5</b> Entry Point and Output</a></li>
<li class="chapter" data-level="21.6" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-conf"><i class="fa fa-check"></i><b>21.6</b> Configuration File</a></li>
<li class="chapter" data-level="21.7" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-npm-scripts"><i class="fa fa-check"></i><b>21.7</b> NPM scripts</a></li>
<li class="chapter" data-level="21.8" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-webpack-mode"><i class="fa fa-check"></i><b>21.8</b> Source maps</a></li>
<li class="chapter" data-level="21.9" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-bundle"><i class="fa fa-check"></i><b>21.9</b> Bundle</a></li>
<li class="chapter" data-level="21.10" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-internal-dependencies"><i class="fa fa-check"></i><b>21.10</b> Internal Dependencies</a></li>
<li class="chapter" data-level="21.11" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-external-dependencies"><i class="fa fa-check"></i><b>21.11</b> External Dependencies</a></li>
<li class="chapter" data-level="21.12" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-import-export"><i class="fa fa-check"></i><b>21.12</b> Import and Export</a><ul>
<li class="chapter" data-level="21.12.1" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-import-export-named"><i class="fa fa-check"></i><b>21.12.1</b> Named</a></li>
<li class="chapter" data-level="21.12.2" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-import-export-default"><i class="fa fa-check"></i><b>21.12.2</b> Default</a></li>
<li class="chapter" data-level="21.12.3" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-import-export-wrap-up"><i class="fa fa-check"></i><b>21.12.3</b> Wrap-up</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="22" data-path="packer-overview.html"><a href="packer-overview.html"><i class="fa fa-check"></i><b>22</b> Webpack with R</a><ul>
<li class="chapter" data-level="22.1" data-path="packer-overview.html"><a href="packer-overview.html#packer-principles"><i class="fa fa-check"></i><b>22.1</b> Principles of packer</a></li>
<li class="chapter" data-level="22.2" data-path="packer-overview.html"><a href="packer-overview.html#packer-scaffolds"><i class="fa fa-check"></i><b>22.2</b> Scaffolds</a></li>
<li class="chapter" data-level="22.3" data-path="packer-overview.html"><a href="packer-overview.html#packer-inputs"><i class="fa fa-check"></i><b>22.3</b> Inputs</a></li>
<li class="chapter" data-level="22.4" data-path="packer-overview.html"><a href="packer-overview.html#packer-r-file"><i class="fa fa-check"></i><b>22.4</b> R file</a></li>
<li class="chapter" data-level="22.5" data-path="packer-overview.html"><a href="packer-overview.html#packer-js-files"><i class="fa fa-check"></i><b>22.5</b> JavaScript Files</a></li>
<li class="chapter" data-level="22.6" data-path="packer-overview.html"><a href="packer-overview.html#packer-bundle"><i class="fa fa-check"></i><b>22.6</b> Bundle</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="packer-adv.html"><a href="packer-adv.html"><i class="fa fa-check"></i><b>23</b> Webpack Advanced</a><ul>
<li class="chapter" data-level="23.1" data-path="packer-adv.html"><a href="packer-adv.html#packer-adv-widgets"><i class="fa fa-check"></i><b>23.1</b> Widgets</a></li>
<li class="chapter" data-level="23.2" data-path="packer-adv.html"><a href="packer-adv.html#packer-adv-shiny-vue"><i class="fa fa-check"></i><b>23.2</b> Shiny with Vue and Bootstrap 4</a><ul>
<li class="chapter" data-level="23.2.1" data-path="packer-adv.html"><a href="packer-adv.html#packer-adv-shiny-vue-setup"><i class="fa fa-check"></i><b>23.2.1</b> Setup</a></li>
<li class="chapter" data-level="23.2.2" data-path="packer-adv.html"><a href="packer-adv.html#packer-adv-shiny-vue-bs4"><i class="fa fa-check"></i><b>23.2.2</b> Bootstrap 4 Installation</a></li>
<li class="chapter" data-level="23.2.3" data-path="packer-adv.html"><a href="packer-adv.html#packer-adv-shiny-vue-code"><i class="fa fa-check"></i><b>23.2.3</b> Vue Code</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VI Closing Remarks</b></span></li>
<li class="chapter" data-level="24" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>24</b> Conclusion</a><ul>
<li class="chapter" data-level="24.1" data-path="conclusion.html"><a href="conclusion.html#conclusion-performances"><i class="fa fa-check"></i><b>24.1</b> Performances</a></li>
<li class="chapter" data-level="24.2" data-path="conclusion.html"><a href="conclusion.html#conclusion-trial-and-error"><i class="fa fa-check"></i><b>24.2</b> Trial and Error</a></li>
<li class="chapter" data-level="24.3" data-path="conclusion.html"><a href="conclusion.html#conclusion-ux"><i class="fa fa-check"></i><b>24.3</b> Functionality and UX</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">JavaScript for R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="shiny-output" class="section level1">
<h1><span class="header-section-number">Chapter 14</span> Custom Outputs</h1>
<p>In this chapter, we create a custom Shiny output; in practical terms, this creates custom <code>render*</code> and <code>*Output</code> functions to use in Shiny. This will be demonstrated by creating something akin to the <code>valueBox</code> available in the shinydashboard <span class="citation">(Chang and Borges Ribeiro <a href="#ref-R-shinydashboard">2018</a>)</span> package. While similar to what shinydashboard provides, this box will 1) be fully customisable and 2) available in any Shiny application 3) have additional functionalities.</p>
<p>The <code>valueBox</code> equivalent we shall build in this chapter is named “boxxy,” and allows creating simple but colourful value boxes with animated numbers (by counting up to it) using <a href="https://github.com/inorganik/countUp.js">countUp.js</a>.</p>
<p>Figure <a href="shiny-output.html#fig:boxxy-example">14.1</a> demonstrates what will be built in this chapter.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb252-1" title="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb252-2" title="2"></a>
<a class="sourceLine" id="cb252-3" title="3">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb252-4" title="4">  <span class="kw">boxxyOutput</span>(<span class="st">&quot;countries&quot;</span>)</a>
<a class="sourceLine" id="cb252-5" title="5">)</a>
<a class="sourceLine" id="cb252-6" title="6"></a>
<a class="sourceLine" id="cb252-7" title="7">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){</a>
<a class="sourceLine" id="cb252-8" title="8">  output<span class="op">$</span>countries &lt;-<span class="st"> </span><span class="kw">renderBoxxy</span>({</a>
<a class="sourceLine" id="cb252-9" title="9">    <span class="kw">boxxy</span>(<span class="st">&quot;Countries&quot;</span>, <span class="dv">95</span>)</a>
<a class="sourceLine" id="cb252-10" title="10">  })</a>
<a class="sourceLine" id="cb252-11" title="11">}</a>
<a class="sourceLine" id="cb252-12" title="12"></a>
<a class="sourceLine" id="cb252-13" title="13"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:boxxy-example"></span>
<img src="images/boxxy-example.png" alt="Custom output example" width="100%" />
<p class="caption">
FIGURE 14.1: Custom output example
</p>
</div>
<div id="shiny-output-inner-workings" class="section level2">
<h2><span class="header-section-number">14.1</span> Inner-workings</h2>
<p>At the core, this consists in creating three functions: <code>boxxy</code>, <code>renderBoxxy</code>, and <code>boxxyOutput</code> (analogous to <code>plot</code>, <code>renderPlot</code>, <code>plotOutput</code>), which are linked by an “output binding” in JavaScript.</p>
<p>The first function, <code>boxxy</code> will accept arguments that help define what is in the box. This function is generally useful to preprocess any of the arguments that are meant to produce the custom output. The <code>boxxyOutput</code> function essentially creates the scaffold of the HTML output (e.g.: <code>&lt;div&gt;</code>), as well as the dependencies. The <code>render*</code> function is perhaps more peculiar: it should accept an expression and return a function.</p>
<p>Previous work with Shiny and JavaScript covered in this book had no dedicated “output” elements that were placed in the Shiny UI. Therefore, one had to use a function solely dedicated to importing the dependencies (e.g.: <code>usejBox</code>). However, since this is not the case here, the dependencies can be attached together with the output.</p>
<p>Finally, the two R functions are “bound” JavaScript-side with an “output binding” that renders the data from the <code>render*</code> function with its <code>*output</code>.</p>
</div>
<div id="shiny-output-setup" class="section level2">
<h2><span class="header-section-number">14.2</span> Setup</h2>
<p>The custom output will be part of a Shiny application, let us thus create the basic skeleton of an application and download the dependencies. Create a project in RStudio or an empty directory, then:</p>
<ol style="list-style-type: decimal">
<li>Create an <code>app.R</code> file that will hold the code for the application and <code>boxxy</code>, <code>boxxyOutput</code>, and <code>renderBoxxy</code> functions.</li>
<li>Create an <code>assets</code> directory that will contain the CSS and JavaScript files.</li>
<li>Download the countUp.js dependency.</li>
<li>Create a <code>binding.js</code> JavaScript file for the JavaScript binding within the previously created <code>assets</code> directory.</li>
<li>Create a <code>styles.css</code> file in the <code>assets</code> directory.</li>
</ol>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb253-1" title="1"><span class="co"># application file</span></a>
<a class="sourceLine" id="cb253-2" title="2"><span class="kw">file.create</span>(<span class="st">&quot;app.R&quot;</span>)</a>
<a class="sourceLine" id="cb253-3" title="3"></a>
<a class="sourceLine" id="cb253-4" title="4"><span class="co"># static file directory</span></a>
<a class="sourceLine" id="cb253-5" title="5"><span class="kw">dir.create</span>(<span class="st">&quot;assets&quot;</span>)</a>
<a class="sourceLine" id="cb253-6" title="6"></a>
<a class="sourceLine" id="cb253-7" title="7"><span class="co"># countup dependency</span></a>
<a class="sourceLine" id="cb253-8" title="8">url &lt;-<span class="st"> </span><span class="kw">paste0</span>(</a>
<a class="sourceLine" id="cb253-9" title="9">  <span class="st">&quot;https://cdn.jsdelivr.net/npm/&quot;</span>,</a>
<a class="sourceLine" id="cb253-10" title="10">  <span class="st">&quot;countup@1.8.2/countUp.js&quot;</span></a>
<a class="sourceLine" id="cb253-11" title="11">)</a>
<a class="sourceLine" id="cb253-12" title="12"></a>
<a class="sourceLine" id="cb253-13" title="13"><span class="kw">download.file</span>(url, <span class="st">&quot;assets/countup.js&quot;</span>)</a>
<a class="sourceLine" id="cb253-14" title="14"></a>
<a class="sourceLine" id="cb253-15" title="15"><span class="co"># create binding file</span></a>
<a class="sourceLine" id="cb253-16" title="16"><span class="kw">file.create</span>(<span class="st">&quot;assets/binding.js&quot;</span>)</a>
<a class="sourceLine" id="cb253-17" title="17"></a>
<a class="sourceLine" id="cb253-18" title="18"><span class="co"># CSS file</span></a>
<a class="sourceLine" id="cb253-19" title="19"><span class="kw">file.create</span>(<span class="st">&quot;assets/styles.css&quot;</span>)</a></code></pre></div>
<p>This should produce the following directory structure.</p>
<pre><code>.
├── app.R
└── assets
    ├── binding.js
    ├── countup.js
    └── styles.css</code></pre>
</div>
<div id="shiny-output-r-fun" class="section level2">
<h2><span class="header-section-number">14.3</span> Output R Function</h2>
<p>The <code>boxxy</code> function takes three arguments: a <code>title</code>, a <code>value</code> that will be animated, and the background <code>color</code> to use for the box. The function, at this stage at least, does not preprocess the arguments and returns them as a named <code>list</code>.</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb255-1" title="1"><span class="co"># app.R</span></a>
<a class="sourceLine" id="cb255-2" title="2"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb255-3" title="3"></a>
<a class="sourceLine" id="cb255-4" title="4">boxxy &lt;-<span class="st"> </span><span class="cf">function</span>(title, value, <span class="dt">color =</span> <span class="st">&quot;#ef476f&quot;</span>){</a>
<a class="sourceLine" id="cb255-5" title="5">  <span class="kw">list</span>(<span class="dt">title =</span> title, <span class="dt">value =</span> value, <span class="dt">color =</span> color)</a>
<a class="sourceLine" id="cb255-6" title="6">}</a></code></pre></div>
</div>
<div id="shiny-output-html" class="section level2">
<h2><span class="header-section-number">14.4</span> Generate Output HTML</h2>
<p>The <code>boxxyOutput</code> function, like all such functions (<code>plotOutput</code>, <code>uiOutput</code>, etc.) takes an <code>id</code>. This function should return an HTML tag that bears an <code>id</code>, or a <code>data-input-id</code> attribute (more on that later) and a <code>class</code>. The <code>id</code> is to be defined by the user of the function in Shiny just like any other such outputs. For instance, <code>plotOutput</code> creates a <code>&lt;div&gt;</code>, the <code>id</code> of which is actually the <code>id</code> used in the <code>plotOutput</code> function.</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb256-1" title="1"><span class="co"># the id is used as id to the element</span></a>
<a class="sourceLine" id="cb256-2" title="2">shiny<span class="op">::</span><span class="kw">plotOutput</span>(<span class="dt">id =</span> <span class="st">&quot;myPlotId&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb257"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb257-1" title="1"><span class="kw">&lt;div</span> </a>
<a class="sourceLine" id="cb257-2" title="2"><span class="ot">  id=</span><span class="st">&quot;myPlotId&quot;</span> </a>
<a class="sourceLine" id="cb257-3" title="3"><span class="ot">  class=</span><span class="st">&quot;shiny-plot-output&quot;</span> </a>
<a class="sourceLine" id="cb257-4" title="4"><span class="ot">  style=</span><span class="st">&quot;width: 100% ; height: 400px&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb257-5" title="5"><span class="kw">&lt;/div&gt;</span></a></code></pre></div>
<p>The <code>class</code> is used JavaScript-side to “find” the outputs in the DOM and generate the output. The function <code>boxxyOutput</code> could thus be as shown, the <code>id</code> is passed along to the <code>&lt;div&gt;</code>, which is created with a <code>boxxy</code> class that will be used in the output binding to find that element and generate the output within that very <code>&lt;div&gt;</code> using data that will be passed from the server.</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb258-1" title="1">boxxyOutput &lt;-<span class="st"> </span><span class="cf">function</span>(id){</a>
<a class="sourceLine" id="cb258-2" title="2">  <span class="co"># the HTML output</span></a>
<a class="sourceLine" id="cb258-3" title="3">  shiny<span class="op">::</span>tags<span class="op">$</span><span class="kw">div</span>(</a>
<a class="sourceLine" id="cb258-4" title="4">    <span class="dt">id =</span> id, <span class="dt">class =</span> <span class="st">&quot;boxxy&quot;</span></a>
<a class="sourceLine" id="cb258-5" title="5">  )</a>
<a class="sourceLine" id="cb258-6" title="6">}</a></code></pre></div>
<div class="rmdnote">
<p>
Make sure you use unique class names so they are not accidentally overridden by the user.
</p>
</div>
<p>As shown, the box should include a title and an animated value. These could be generated entirely in JavaScript, but it’s actually easier to create placeholders with htmltools tags. We generate dynamic ids for those so they can easily be referenced later on in JavaScript: <code>id-boxxy-value</code> for the value and <code>id-boxxy-title</code> for the title.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb259-1" title="1">boxxyOutput &lt;-<span class="st"> </span><span class="cf">function</span>(id){</a>
<a class="sourceLine" id="cb259-2" title="2">  <span class="co"># the HTML output</span></a>
<a class="sourceLine" id="cb259-3" title="3">  shiny<span class="op">::</span>tags<span class="op">$</span><span class="kw">div</span>(</a>
<a class="sourceLine" id="cb259-4" title="4">    <span class="dt">id =</span> id, <span class="dt">class =</span> <span class="st">&quot;boxxy&quot;</span>,</a>
<a class="sourceLine" id="cb259-5" title="5">    <span class="kw">h1</span>(</a>
<a class="sourceLine" id="cb259-6" title="6">      <span class="dt">id =</span> <span class="kw">sprintf</span>(<span class="st">&quot;%s-boxxy-value&quot;</span>, id), </a>
<a class="sourceLine" id="cb259-7" title="7">      <span class="dt">class =</span> <span class="st">&quot;boxxy-value&quot;</span></a>
<a class="sourceLine" id="cb259-8" title="8">    ),</a>
<a class="sourceLine" id="cb259-9" title="9">    <span class="kw">p</span>(</a>
<a class="sourceLine" id="cb259-10" title="10">      <span class="dt">id =</span> <span class="kw">sprintf</span>(<span class="st">&quot;%s-boxxy-title&quot;</span>, id), </a>
<a class="sourceLine" id="cb259-11" title="11">      <span class="dt">class =</span> <span class="st">&quot;boxxy-title&quot;</span></a>
<a class="sourceLine" id="cb259-12" title="12">    )</a>
<a class="sourceLine" id="cb259-13" title="13">  )</a>
<a class="sourceLine" id="cb259-14" title="14">}</a></code></pre></div>
<p>Finally, we also used classes in the output so every element it comprises can be styled with ease.</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb260-1" title="1"><span class="fu">.boxxy</span>{</a>
<a class="sourceLine" id="cb260-2" title="2">  <span class="kw">text-align</span>: <span class="dv">center</span><span class="op">;</span></a>
<a class="sourceLine" id="cb260-3" title="3">  <span class="kw">border-left</span>: <span class="dv">6</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#073b4c</span><span class="op">;</span></a>
<a class="sourceLine" id="cb260-4" title="4">  <span class="kw">padding</span>: <span class="dv">1</span><span class="dt">em</span><span class="op">;</span></a>
<a class="sourceLine" id="cb260-5" title="5">}</a>
<a class="sourceLine" id="cb260-6" title="6"></a>
<a class="sourceLine" id="cb260-7" title="7"><span class="fu">.boxxy-title</span>{</a>
<a class="sourceLine" id="cb260-8" title="8">  <span class="kw">text-transform</span>: <span class="dv">uppercase</span><span class="op">;</span></a>
<a class="sourceLine" id="cb260-9" title="9">}</a>
<a class="sourceLine" id="cb260-10" title="10"></a>
<a class="sourceLine" id="cb260-11" title="11"><span class="fu">.boxxy-value</span>{</a>
<a class="sourceLine" id="cb260-12" title="12">  <span class="kw">font-size</span>: <span class="dv">3</span><span class="dt">em</span><span class="op">;</span></a>
<a class="sourceLine" id="cb260-13" title="13">}</a></code></pre></div>
<p>In some previous examples we created a function decicated to importing dependencies in the Shiny UI but in this case they can piggyback on the <code>boxxyOutput</code> function. This works using the htmltools package. The function <code>htmltools::htmlDependency</code> is used to create a dependency that is then attached with <code>htmltools::attachDependencies</code>. While the former creates an object that Shiny can understand and translate into <code>&lt;script&gt;</code> or <code>&lt;style&gt;</code> tags, the former attaches them to the output object and ensures dependencies are not imported multiple times (e.g.: when <code>boxxyOutput</code> is used more than once).</p>
<p>Notice the use of <code>normalizePath</code> to retrieve the full path to the <code>assets</code> directory as this will not work with a relative path (e.g.: <code>./assets</code>). The dependencies consist of the three files previously created and necessary to generate the output: <code>countup.js</code>, the dependency that was downloaded, as well as <code>binding.js</code> and <code>styles.css</code>.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb261-1" title="1">boxxyOutput &lt;-<span class="st"> </span><span class="cf">function</span>(id){</a>
<a class="sourceLine" id="cb261-2" title="2">  el &lt;-<span class="st"> </span>tags<span class="op">$</span><span class="kw">div</span>(</a>
<a class="sourceLine" id="cb261-3" title="3">    <span class="dt">id =</span> id, <span class="dt">class =</span> <span class="st">&quot;boxxy&quot;</span>,</a>
<a class="sourceLine" id="cb261-4" title="4">    <span class="kw">h1</span>(</a>
<a class="sourceLine" id="cb261-5" title="5">      <span class="dt">id =</span> <span class="kw">sprintf</span>(<span class="st">&quot;%s-boxxy-counter&quot;</span>, id), </a>
<a class="sourceLine" id="cb261-6" title="6">      <span class="dt">class =</span> <span class="st">&quot;boxxy-value&quot;</span></a>
<a class="sourceLine" id="cb261-7" title="7">    ),</a>
<a class="sourceLine" id="cb261-8" title="8">    <span class="kw">p</span>(</a>
<a class="sourceLine" id="cb261-9" title="9">      <span class="dt">id =</span> <span class="kw">sprintf</span>(<span class="st">&quot;%s-boxxy-title&quot;</span>, id), </a>
<a class="sourceLine" id="cb261-10" title="10">      <span class="dt">class =</span> <span class="st">&quot;boxxy-title&quot;</span></a>
<a class="sourceLine" id="cb261-11" title="11">    )</a>
<a class="sourceLine" id="cb261-12" title="12">  )</a>
<a class="sourceLine" id="cb261-13" title="13"></a>
<a class="sourceLine" id="cb261-14" title="14">  <span class="co"># get full path</span></a>
<a class="sourceLine" id="cb261-15" title="15">  path &lt;-<span class="st"> </span><span class="kw">normalizePath</span>(<span class="st">&quot;assets&quot;</span>)</a>
<a class="sourceLine" id="cb261-16" title="16"></a>
<a class="sourceLine" id="cb261-17" title="17">  deps &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb261-18" title="18">    htmltools<span class="op">::</span><span class="kw">htmlDependency</span>(</a>
<a class="sourceLine" id="cb261-19" title="19">      <span class="dt">name =</span> <span class="st">&quot;boxxy&quot;</span>,</a>
<a class="sourceLine" id="cb261-20" title="20">      <span class="dt">version =</span> <span class="st">&quot;1.0.0&quot;</span>,</a>
<a class="sourceLine" id="cb261-21" title="21">      <span class="dt">src =</span> <span class="kw">c</span>(<span class="dt">file =</span> path),</a>
<a class="sourceLine" id="cb261-22" title="22">      <span class="dt">script =</span> <span class="kw">c</span>(<span class="st">&quot;countup.js&quot;</span>, <span class="st">&quot;binding.js&quot;</span>),</a>
<a class="sourceLine" id="cb261-23" title="23">      <span class="dt">stylesheet =</span> <span class="st">&quot;styles.css&quot;</span></a>
<a class="sourceLine" id="cb261-24" title="24">    )</a>
<a class="sourceLine" id="cb261-25" title="25">  )</a>
<a class="sourceLine" id="cb261-26" title="26"></a>
<a class="sourceLine" id="cb261-27" title="27">  htmltools<span class="op">::</span><span class="kw">attachDependencies</span>(el, deps)</a>
<a class="sourceLine" id="cb261-28" title="28">}</a></code></pre></div>
<p>Running the function reveals the HTML it generates at the exception of the dependencies which htmltools does not print to the console.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb262-1" title="1"><span class="kw">boxxyOutput</span>(<span class="st">&quot;myID&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb263"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb263-1" title="1"><span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;myID&quot;</span><span class="ot"> class=</span><span class="st">&quot;boxxy&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb263-2" title="2">  <span class="kw">&lt;h1</span><span class="ot"> id=</span><span class="st">&quot;myID-boxxy-counter&quot;</span><span class="ot"> class=</span><span class="st">&quot;boxxy-value&quot;</span><span class="kw">&gt;&lt;/h1&gt;</span></a>
<a class="sourceLine" id="cb263-3" title="3">  <span class="kw">&lt;p</span><span class="ot"> id=</span><span class="st">&quot;myID-boxxy-title&quot;</span><span class="ot"> class=</span><span class="st">&quot;boxxy-title&quot;</span><span class="kw">&gt;&lt;/p&gt;</span></a>
<a class="sourceLine" id="cb263-4" title="4"><span class="kw">&lt;/div&gt;</span></a></code></pre></div>
</div>
<div id="shiny-output-renderer" class="section level2">
<h2><span class="header-section-number">14.5</span> Output Renderer</h2>
<p>The function <code>renderBoxxy</code> should accept an expression, like other such <code>render*</code> functions. For instance, in the example below the <code>renderPlot</code> function does accept an expression that uses, amongst other functions, <code>plot</code>.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb264-1" title="1">output<span class="op">$</span>myPlot &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</a>
<a class="sourceLine" id="cb264-2" title="2">  <span class="co"># this is an expression</span></a>
<a class="sourceLine" id="cb264-3" title="3">  cars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb264-4" title="4"><span class="st">    </span><span class="kw">head</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb264-5" title="5"><span class="st">    </span><span class="kw">plot</span>()</a>
<a class="sourceLine" id="cb264-6" title="6">})</a></code></pre></div>
<p>The function <code>renderBoxxy</code> takes an expression and other arguments that are passed to <code>shiny::exprToFunction</code>. This does pretty much what it says on the tin: it returns a function from an expression (unless that expression is a function, in which case it returns the expression). This function must be further wrapped in another as render functions must return functions.</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb265-1" title="1">renderBoxxy &lt;-<span class="st"> </span><span class="cf">function</span>(expr, <span class="dt">env =</span> <span class="kw">parent.frame</span>(), </a>
<a class="sourceLine" id="cb265-2" title="2">  <span class="dt">quoted =</span> <span class="ot">FALSE</span>) {</a>
<a class="sourceLine" id="cb265-3" title="3">  <span class="co"># Convert the expression + environment into a function</span></a>
<a class="sourceLine" id="cb265-4" title="4">  func &lt;-<span class="st"> </span>shiny<span class="op">::</span><span class="kw">exprToFunction</span>(expr, env, quoted)</a>
<a class="sourceLine" id="cb265-5" title="5"></a>
<a class="sourceLine" id="cb265-6" title="6">  <span class="cf">function</span>(){</a>
<a class="sourceLine" id="cb265-7" title="7">    <span class="kw">func</span>()</a>
<a class="sourceLine" id="cb265-8" title="8">  }</a>
<a class="sourceLine" id="cb265-9" title="9">}</a></code></pre></div>
</div>
<div id="shiny-output-binding" class="section level2">
<h2><span class="header-section-number">14.6</span> JavaScript Output Binding</h2>
<p>Here we create an “output binding.” It tells Shiny how to find the component and how to interact with it. An output binding is initialised from <code>Shiny.OutputBinding</code>. Below we initialise a new binding.</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb266-1" title="1"><span class="co">// custom.js</span></a>
<a class="sourceLine" id="cb266-2" title="2"><span class="kw">var</span> boxxyBinding <span class="op">=</span> <span class="kw">new</span> <span class="va">Shiny</span>.<span class="at">OutputBinding</span>()<span class="op">;</span></a></code></pre></div>
<p>Then, this must be “extended” by specifying a number of methods, an essential one being <code>find</code>. It is used to look for the output HTML element in the document (<code>scope</code>), and to return them as an array (<code>HTMLcollection</code>). Other methods all take an <code>el</code> argument; that value will always be an element that was returned from <code>find</code>. A very straightforward way to accomplish this is to use jQuery’s find method to identify elements with the <code>boxxy</code> class used in <code>boxxyOutput</code>. You are by no means forced to use a CSS class to identify the elements, but there is no reason not to.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb267-1" title="1"><span class="co">// custom.js</span></a>
<a class="sourceLine" id="cb267-2" title="2"><span class="kw">var</span> boxxyBinding <span class="op">=</span> <span class="kw">new</span> <span class="va">Shiny</span>.<span class="at">OutputBinding</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb267-3" title="3"></a>
<a class="sourceLine" id="cb267-4" title="4"><span class="va">$</span>.<span class="at">extend</span>(boxxyBinding<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb267-5" title="5">  <span class="dt">find</span><span class="op">:</span> <span class="kw">function</span>(scope) <span class="op">{</span></a>
<a class="sourceLine" id="cb267-6" title="6">    <span class="cf">return</span> <span class="at">$</span>(scope).<span class="at">find</span>(<span class="st">&quot;.boxxy&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb267-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb267-8" title="8"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>One might then want to use the <code>getId</code> method, which returns the <code>id</code> of the element, by default, as can be seen in the <a href="https://github.com/rstudio/shiny/blob/master/srcjs/output_binding.js">source code</a> (below), the binding returns the id as the <code>data-input-id</code> attribute, and if that is false it returns the element’s <code>id</code>.</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb268-1" title="1"><span class="co">// getId default</span></a>
<a class="sourceLine" id="cb268-2" title="2"><span class="kw">this</span>.<span class="at">getId</span> <span class="op">=</span> <span class="kw">function</span>(el) <span class="op">{</span></a>
<a class="sourceLine" id="cb268-3" title="3">  <span class="cf">return</span> el[<span class="st">&#39;data-input-id&#39;</span>] <span class="op">||</span> <span class="va">el</span>.<span class="at">id</span><span class="op">;</span></a>
<a class="sourceLine" id="cb268-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>Since boxxy uses the element id, the default will work, and this can be skipped entirely.</p>
<p>Next, one needs to implement the <code>renderValue</code> function, which is the same function that generates the output based on data used in <code>boxxy</code> and sent to the front end with <code>renderBoxxy</code>. The <code>renderValue</code> method accepts two arguments: first <code>el</code>, the element where the output should be generated; this is effectively the output of <code>boxxyOutput</code>, which the binding found using <code>find</code>. The second argument is <code>data</code> which is the data, passed to <code>boxxy</code> and serialised via <code>renderBoxxy</code>.</p>
<div class="rmdnote">
<p>
The <code>renderValue</code> is in effect very similar if not identical to the JavaScript function of the same name involved in creating htmlwidgets.
</p>
</div>
<div id="shiny-output-boxxy-title" class="section level3">
<h3><span class="header-section-number">14.6.1</span> Boxxy Title</h3>
<p>Let us now tackle the first of the three core aspects of the boxxy output: the title. The <code>title</code> should be placed in the previously-created placeholder which bears the <code>id-boxxy-title</code>, precisely as was done with htmlwidgets previously. We insert title (<code>data.title</code>) in the element with <code>innerText</code>. The dynamically generated id for the title is built in the same way it is in R, by concatenating the <code>id</code> with <code>-boxxy-title</code></p>
<ul>
<li>In R <code>sprintf("%s-boxxy-title", id)</code></li>
<li>In JavaScript <code>el.id + '-boxxy-title'</code></li>
</ul>
<div class="sourceCode" id="cb269"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb269-1" title="1"><span class="kw">var</span> boxxyBinding <span class="op">=</span> <span class="kw">new</span> <span class="va">Shiny</span>.<span class="at">OutputBinding</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb269-2" title="2"></a>
<a class="sourceLine" id="cb269-3" title="3"><span class="va">$</span>.<span class="at">extend</span>(boxxyBinding<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb269-4" title="4">  <span class="dt">find</span><span class="op">:</span> <span class="kw">function</span>(scope) <span class="op">{</span></a>
<a class="sourceLine" id="cb269-5" title="5">    <span class="cf">return</span> <span class="at">$</span>(scope).<span class="at">find</span>(<span class="st">&quot;.boxxy&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb269-6" title="6">  <span class="op">},</span></a>
<a class="sourceLine" id="cb269-7" title="7">  <span class="dt">renderValue</span><span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> data) <span class="op">{</span></a>
<a class="sourceLine" id="cb269-8" title="8"></a>
<a class="sourceLine" id="cb269-9" title="9">    <span class="co">// insert the title</span></a>
<a class="sourceLine" id="cb269-10" title="10">    <span class="kw">let</span> title_id <span class="op">=</span> <span class="va">el</span>.<span class="at">id</span> <span class="op">+</span> <span class="st">&#39;-boxxy-title&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb269-11" title="11">    <span class="va">document</span>.<span class="at">getElementById</span>(title_id).<span class="at">innerText</span> <span class="op">=</span> <span class="va">data</span>.<span class="at">title</span></a>
<a class="sourceLine" id="cb269-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb269-13" title="13"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
</div>
<div id="shiny-output-boxxy-value" class="section level3">
<h3><span class="header-section-number">14.6.2</span> Boxxy Value</h3>
<p>Though the custom output could be limited to a static value generated in a fashion similar to how the title is placed, we opted for a more fancy animated value using countUp.js.</p>
<p>Initialise a new counter, specify the id of the element, where it should be created as first argument, as second argument the starting value from which the counter should start, and finally the value to count up to. Note that there is a fourth argument to pass a JSON of options, which we do not use here.</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb270-1" title="1"><span class="co">// place counter in elementId</span></a>
<a class="sourceLine" id="cb270-2" title="2"><span class="co">// start at 0 and count up to 123</span></a>
<a class="sourceLine" id="cb270-3" title="3"><span class="kw">const</span> counter <span class="op">=</span> <span class="kw">new</span> <span class="at">CountUp</span>(<span class="st">&#39;elementId&#39;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">123</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb270-4" title="4"><span class="va">counter</span>.<span class="at">start</span>()<span class="op">;</span></a></code></pre></div>
<p>The counter has to be generated in the <code>&lt;h1&gt;</code> placeholder bearing the <code>id-boxxy-value</code>, while the value to count up to is stored in <code>data.value</code> meaning the counter can be initialised with <code>new CountUp(el.id + '-boxxy-value', 0, data.value);</code>.</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb271-1" title="1"><span class="kw">var</span> boxxyBinding <span class="op">=</span> <span class="kw">new</span> <span class="va">Shiny</span>.<span class="at">OutputBinding</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb271-2" title="2"></a>
<a class="sourceLine" id="cb271-3" title="3"><span class="va">$</span>.<span class="at">extend</span>(boxxyBinding<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb271-4" title="4">  <span class="dt">find</span><span class="op">:</span> <span class="kw">function</span>(scope) <span class="op">{</span></a>
<a class="sourceLine" id="cb271-5" title="5">    <span class="cf">return</span> <span class="at">$</span>(scope).<span class="at">find</span>(<span class="st">&quot;.boxxy&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb271-6" title="6">  <span class="op">},</span></a>
<a class="sourceLine" id="cb271-7" title="7">  <span class="dt">renderValue</span><span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> data) <span class="op">{</span></a>
<a class="sourceLine" id="cb271-8" title="8"></a>
<a class="sourceLine" id="cb271-9" title="9">    <span class="co">// insert the title</span></a>
<a class="sourceLine" id="cb271-10" title="10">    <span class="kw">let</span> title_id <span class="op">=</span> <span class="va">el</span>.<span class="at">id</span> <span class="op">+</span> <span class="st">&#39;-boxxy-title&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb271-11" title="11">    <span class="va">document</span>.<span class="at">getElementById</span>(title_id).<span class="at">innerText</span> <span class="op">=</span> <span class="va">data</span>.<span class="at">title</span></a>
<a class="sourceLine" id="cb271-12" title="12"></a>
<a class="sourceLine" id="cb271-13" title="13">    <span class="co">// counter start at 0</span></a>
<a class="sourceLine" id="cb271-14" title="14">    <span class="kw">let</span> counter_id <span class="op">=</span> <span class="va">el</span>.<span class="at">id</span> <span class="op">+</span> <span class="st">&#39;-boxxy-value&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb271-15" title="15">    <span class="kw">var</span> counter <span class="op">=</span> <span class="kw">new</span> <span class="at">CountUp</span>(counter_id<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">data</span>.<span class="at">value</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb271-16" title="16">    <span class="va">counter</span>.<span class="at">start</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb271-17" title="17">  <span class="op">}</span></a>
<a class="sourceLine" id="cb271-18" title="18"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
</div>
<div id="shiny-output-boxxy-bg-color" class="section level3">
<h3><span class="header-section-number">14.6.3</span> Boxxy Background Color</h3>
<p>Then we can set the background colour that was passed to <code>boxxy</code> (<code>data.color</code>).</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb272-1" title="1"><span class="kw">var</span> boxxyBinding <span class="op">=</span> <span class="kw">new</span> <span class="va">Shiny</span>.<span class="at">OutputBinding</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb272-2" title="2"></a>
<a class="sourceLine" id="cb272-3" title="3"><span class="va">$</span>.<span class="at">extend</span>(boxxyBinding<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb272-4" title="4">  <span class="dt">find</span><span class="op">:</span> <span class="kw">function</span>(scope) <span class="op">{</span></a>
<a class="sourceLine" id="cb272-5" title="5">    <span class="cf">return</span> <span class="at">$</span>(scope).<span class="at">find</span>(<span class="st">&quot;.boxxy&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb272-6" title="6">  <span class="op">},</span></a>
<a class="sourceLine" id="cb272-7" title="7">  <span class="dt">renderValue</span><span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> data) <span class="op">{</span></a>
<a class="sourceLine" id="cb272-8" title="8"></a>
<a class="sourceLine" id="cb272-9" title="9">    <span class="co">// insert the title</span></a>
<a class="sourceLine" id="cb272-10" title="10">    <span class="kw">let</span> title_id <span class="op">=</span> <span class="va">el</span>.<span class="at">id</span> <span class="op">+</span> <span class="st">&#39;-boxxy-title&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb272-11" title="11">    <span class="va">document</span>.<span class="at">getElementById</span>(title_id).<span class="at">innerText</span> <span class="op">=</span> <span class="va">data</span>.<span class="at">title</span></a>
<a class="sourceLine" id="cb272-12" title="12"></a>
<a class="sourceLine" id="cb272-13" title="13">    <span class="co">// counter start at 0</span></a>
<a class="sourceLine" id="cb272-14" title="14">    <span class="kw">let</span> counter_id <span class="op">=</span> <span class="va">el</span>.<span class="at">id</span> <span class="op">+</span> <span class="st">&#39;-boxxy-value&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb272-15" title="15">    <span class="kw">var</span> counter <span class="op">=</span> <span class="kw">new</span> <span class="at">CountUp</span>(counter_id<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">data</span>.<span class="at">value</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb272-16" title="16">    <span class="va">counter</span>.<span class="at">start</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb272-17" title="17"></a>
<a class="sourceLine" id="cb272-18" title="18">    <span class="co">// background color </span></a>
<a class="sourceLine" id="cb272-19" title="19">    <span class="va">el</span>.<span class="va">style</span>.<span class="at">backgroundColor</span> <span class="op">=</span> <span class="va">data</span>.<span class="at">color</span><span class="op">;</span></a>
<a class="sourceLine" id="cb272-20" title="20">  <span class="op">}</span></a>
<a class="sourceLine" id="cb272-21" title="21"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
</div>
<div id="shiny-output-register" class="section level3">
<h3><span class="header-section-number">14.6.4</span> Register the Output Binding</h3>
<p>Finally, the output binding must be registered with Shiny. Note that it uses a unique string identifier. The <a href="https://shiny.rstudio.com/articles/building-outputs.html">documentation</a> states:</p>
<blockquote>
<p>At the moment it is unused but future features may depend on it.</p>
</blockquote>
<div class="sourceCode" id="cb273"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb273-1" title="1"><span class="kw">var</span> boxxyBinding <span class="op">=</span> <span class="kw">new</span> <span class="va">Shiny</span>.<span class="at">OutputBinding</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb273-2" title="2"></a>
<a class="sourceLine" id="cb273-3" title="3"><span class="va">$</span>.<span class="at">extend</span>(boxxyBinding<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb273-4" title="4">  <span class="dt">find</span><span class="op">:</span> <span class="kw">function</span>(scope) <span class="op">{</span></a>
<a class="sourceLine" id="cb273-5" title="5">    <span class="cf">return</span> <span class="at">$</span>(scope).<span class="at">find</span>(<span class="st">&quot;.boxxy&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb273-6" title="6">  <span class="op">},</span></a>
<a class="sourceLine" id="cb273-7" title="7">  <span class="dt">renderValue</span><span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> data) <span class="op">{</span></a>
<a class="sourceLine" id="cb273-8" title="8"></a>
<a class="sourceLine" id="cb273-9" title="9">    <span class="co">// insert the title</span></a>
<a class="sourceLine" id="cb273-10" title="10">    <span class="kw">let</span> title_id <span class="op">=</span> <span class="va">el</span>.<span class="at">id</span> <span class="op">+</span> <span class="st">&#39;-boxxy-title&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb273-11" title="11">    <span class="va">document</span>.<span class="at">getElementById</span>(title_id).<span class="at">innerText</span> <span class="op">=</span> <span class="va">data</span>.<span class="at">title</span></a>
<a class="sourceLine" id="cb273-12" title="12"></a>
<a class="sourceLine" id="cb273-13" title="13">    <span class="co">// counter start at 0</span></a>
<a class="sourceLine" id="cb273-14" title="14">    <span class="kw">let</span> counter_id <span class="op">=</span> <span class="va">el</span>.<span class="at">id</span> <span class="op">+</span> <span class="st">&#39;-boxxy-value&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb273-15" title="15">    <span class="kw">var</span> counter <span class="op">=</span> <span class="kw">new</span> <span class="at">CountUp</span>(counter_id<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">data</span>.<span class="at">value</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb273-16" title="16">    <span class="va">counter</span>.<span class="at">start</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb273-17" title="17"></a>
<a class="sourceLine" id="cb273-18" title="18">    <span class="co">// background color </span></a>
<a class="sourceLine" id="cb273-19" title="19">    <span class="va">el</span>.<span class="va">style</span>.<span class="at">backgroundColor</span> <span class="op">=</span> <span class="va">data</span>.<span class="at">color</span><span class="op">;</span></a>
<a class="sourceLine" id="cb273-20" title="20">  <span class="op">}</span></a>
<a class="sourceLine" id="cb273-21" title="21"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb273-22" title="22"></a>
<a class="sourceLine" id="cb273-23" title="23"><span class="co">// register</span></a>
<a class="sourceLine" id="cb273-24" title="24"><span class="va">Shiny</span>.<span class="va">outputBindings</span>.<span class="at">register</span>(boxxyBinding<span class="op">,</span> <span class="st">&quot;john.boxxy&quot;</span>)<span class="op">;</span></a></code></pre></div>
<p>Ensure that string uniquely identifies the binding to avoid future clash with other such bindings.</p>
</div>
</div>
<div id="shiny-output-usage" class="section level2">
<h2><span class="header-section-number">14.7</span> Boxxy Usage</h2>
<p>With all of this in place, one can use boxxy in a Shiny application (Figure <a href="shiny-output.html#fig:boxxy-custom">14.2</a>).</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb274-1" title="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb274-2" title="2"></a>
<a class="sourceLine" id="cb274-3" title="3">boxxy &lt;-<span class="st"> </span><span class="cf">function</span>(title, value, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>){</a>
<a class="sourceLine" id="cb274-4" title="4">  <span class="kw">list</span>(<span class="dt">title =</span> title, <span class="dt">value =</span> value, <span class="dt">color =</span> color)</a>
<a class="sourceLine" id="cb274-5" title="5">}</a>
<a class="sourceLine" id="cb274-6" title="6"></a>
<a class="sourceLine" id="cb274-7" title="7">boxxyOutput &lt;-<span class="st"> </span><span class="cf">function</span>(id){</a>
<a class="sourceLine" id="cb274-8" title="8">  el &lt;-<span class="st"> </span>shiny<span class="op">::</span>tags<span class="op">$</span><span class="kw">div</span>(</a>
<a class="sourceLine" id="cb274-9" title="9">    <span class="dt">id =</span> id, <span class="dt">class =</span> <span class="st">&quot;boxxy&quot;</span>,</a>
<a class="sourceLine" id="cb274-10" title="10">    <span class="kw">h1</span>(<span class="dt">id =</span> <span class="kw">sprintf</span>(<span class="st">&quot;%s-boxxy-value&quot;</span>, id), <span class="dt">class =</span> <span class="st">&quot;boxxy-value&quot;</span>),</a>
<a class="sourceLine" id="cb274-11" title="11">    <span class="kw">p</span>(<span class="dt">id =</span> <span class="kw">sprintf</span>(<span class="st">&quot;%s-boxxy-title&quot;</span>, id), <span class="dt">class =</span> <span class="st">&quot;boxxy-title&quot;</span>)</a>
<a class="sourceLine" id="cb274-12" title="12">  )</a>
<a class="sourceLine" id="cb274-13" title="13"></a>
<a class="sourceLine" id="cb274-14" title="14">  path &lt;-<span class="st"> </span><span class="kw">normalizePath</span>(<span class="st">&quot;assets&quot;</span>)</a>
<a class="sourceLine" id="cb274-15" title="15"></a>
<a class="sourceLine" id="cb274-16" title="16">  deps &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb274-17" title="17">    htmltools<span class="op">::</span><span class="kw">htmlDependency</span>(</a>
<a class="sourceLine" id="cb274-18" title="18">      <span class="dt">name =</span> <span class="st">&quot;boxxy&quot;</span>,</a>
<a class="sourceLine" id="cb274-19" title="19">      <span class="dt">version =</span> <span class="st">&quot;1.0.0&quot;</span>,</a>
<a class="sourceLine" id="cb274-20" title="20">      <span class="dt">src =</span> <span class="kw">c</span>(<span class="dt">file =</span> path),</a>
<a class="sourceLine" id="cb274-21" title="21">      <span class="dt">script =</span> <span class="kw">c</span>(<span class="st">&quot;countup.js&quot;</span>, <span class="st">&quot;binding.js&quot;</span>),</a>
<a class="sourceLine" id="cb274-22" title="22">      <span class="dt">stylesheet =</span> <span class="st">&quot;styles.css&quot;</span></a>
<a class="sourceLine" id="cb274-23" title="23">    )</a>
<a class="sourceLine" id="cb274-24" title="24">  )</a>
<a class="sourceLine" id="cb274-25" title="25"></a>
<a class="sourceLine" id="cb274-26" title="26">  htmltools<span class="op">::</span><span class="kw">attachDependencies</span>(el, deps)</a>
<a class="sourceLine" id="cb274-27" title="27">}</a>
<a class="sourceLine" id="cb274-28" title="28"></a>
<a class="sourceLine" id="cb274-29" title="29">renderBoxxy &lt;-<span class="st"> </span><span class="cf">function</span>(expr, <span class="dt">env =</span> <span class="kw">parent.frame</span>(), </a>
<a class="sourceLine" id="cb274-30" title="30">  <span class="dt">quoted =</span> <span class="ot">FALSE</span>) {</a>
<a class="sourceLine" id="cb274-31" title="31">  <span class="co"># Convert the expression + environment into a function</span></a>
<a class="sourceLine" id="cb274-32" title="32">  func &lt;-<span class="st"> </span>shiny<span class="op">::</span><span class="kw">exprToFunction</span>(expr, env, quoted)</a>
<a class="sourceLine" id="cb274-33" title="33"></a>
<a class="sourceLine" id="cb274-34" title="34">  <span class="cf">function</span>(){</a>
<a class="sourceLine" id="cb274-35" title="35">    <span class="kw">func</span>()</a>
<a class="sourceLine" id="cb274-36" title="36">  }</a>
<a class="sourceLine" id="cb274-37" title="37">}</a>
<a class="sourceLine" id="cb274-38" title="38"></a>
<a class="sourceLine" id="cb274-39" title="39">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb274-40" title="40">  <span class="kw">h2</span>(<span class="st">&quot;Custom outputs&quot;</span>),</a>
<a class="sourceLine" id="cb274-41" title="41">  <span class="kw">fluidRow</span>(</a>
<a class="sourceLine" id="cb274-42" title="42">    <span class="kw">column</span>(</a>
<a class="sourceLine" id="cb274-43" title="43">      <span class="dv">3</span>, <span class="kw">boxxyOutput</span>(<span class="st">&quot;countries&quot;</span>)</a>
<a class="sourceLine" id="cb274-44" title="44">    ),</a>
<a class="sourceLine" id="cb274-45" title="45">    <span class="kw">column</span>(</a>
<a class="sourceLine" id="cb274-46" title="46">      <span class="dv">3</span>, <span class="kw">boxxyOutput</span>(<span class="st">&quot;employees&quot;</span>)</a>
<a class="sourceLine" id="cb274-47" title="47">    ),</a>
<a class="sourceLine" id="cb274-48" title="48">    <span class="kw">column</span>(</a>
<a class="sourceLine" id="cb274-49" title="49">      <span class="dv">3</span>, <span class="kw">boxxyOutput</span>(<span class="st">&quot;customers&quot;</span>)</a>
<a class="sourceLine" id="cb274-50" title="50">    ),</a>
<a class="sourceLine" id="cb274-51" title="51">    <span class="kw">column</span>(</a>
<a class="sourceLine" id="cb274-52" title="52">      <span class="dv">3</span>, <span class="kw">boxxyOutput</span>(<span class="st">&quot;subs&quot;</span>)</a>
<a class="sourceLine" id="cb274-53" title="53">    )</a>
<a class="sourceLine" id="cb274-54" title="54">  )</a>
<a class="sourceLine" id="cb274-55" title="55">)</a>
<a class="sourceLine" id="cb274-56" title="56"></a>
<a class="sourceLine" id="cb274-57" title="57">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){</a>
<a class="sourceLine" id="cb274-58" title="58">  output<span class="op">$</span>countries &lt;-<span class="st"> </span><span class="kw">renderBoxxy</span>({</a>
<a class="sourceLine" id="cb274-59" title="59">    <span class="kw">boxxy</span>(<span class="st">&quot;Countries&quot;</span>, <span class="dv">95</span>, <span class="dt">color =</span> <span class="st">&quot;#ef476f&quot;</span>)</a>
<a class="sourceLine" id="cb274-60" title="60">  })</a>
<a class="sourceLine" id="cb274-61" title="61"></a>
<a class="sourceLine" id="cb274-62" title="62">  output<span class="op">$</span>employees &lt;-<span class="st"> </span><span class="kw">renderBoxxy</span>({</a>
<a class="sourceLine" id="cb274-63" title="63">    <span class="kw">boxxy</span>(<span class="st">&quot;Thing&quot;</span>, <span class="dv">650</span>, <span class="dt">color =</span> <span class="st">&quot;#06d6a0&quot;</span>)</a>
<a class="sourceLine" id="cb274-64" title="64">  })</a>
<a class="sourceLine" id="cb274-65" title="65"></a>
<a class="sourceLine" id="cb274-66" title="66">  output<span class="op">$</span>customers &lt;-<span class="st"> </span><span class="kw">renderBoxxy</span>({</a>
<a class="sourceLine" id="cb274-67" title="67">    <span class="kw">boxxy</span>(<span class="st">&quot;Customers&quot;</span>, <span class="dv">13592</span>, <span class="dt">color =</span> <span class="st">&quot;#118ab2&quot;</span>)</a>
<a class="sourceLine" id="cb274-68" title="68">  })</a>
<a class="sourceLine" id="cb274-69" title="69"></a>
<a class="sourceLine" id="cb274-70" title="70">  output<span class="op">$</span>subs &lt;-<span class="st"> </span><span class="kw">renderBoxxy</span>({</a>
<a class="sourceLine" id="cb274-71" title="71">    <span class="kw">boxxy</span>(<span class="st">&quot;Subscriptions&quot;</span>, <span class="dv">16719</span>, <span class="dt">color =</span> <span class="st">&quot;#ffd166&quot;</span>)</a>
<a class="sourceLine" id="cb274-72" title="72">  })</a>
<a class="sourceLine" id="cb274-73" title="73">}</a>
<a class="sourceLine" id="cb274-74" title="74"></a>
<a class="sourceLine" id="cb274-75" title="75"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:boxxy-custom"></span>
<img src="images/custom-output-boxxy.png" alt="Shiny application with boxxy" width="100%" />
<p class="caption">
FIGURE 14.2: Shiny application with boxxy
</p>
</div>
</div>
<div id="shiny-output-inject" class="section level2">
<h2><span class="header-section-number">14.8</span> Injecting Dependencies</h2>
<p>We could consider making the animation of the value rendered with <code>boxxy</code> optional; some users may not want to use it. You might already imagine how a new argument and a few if-statements could very quickly do the job, but how would one handle the dependency? Indeed if users do not want to make use of the animation, the CountUp.js dependency should also be excluded so as to keep the output as light as possible.</p>
<p>The dependency is currently attached in the <code>boxxyOutput</code> function, which does not take any argument. It could, but it would make for the rather messy and confusing interface as whatever additional argument that indicates whether the numbers should be animated would have to be specified twice. Once in the <code>boxxyOutput</code> function, so it does not import the dependency, as well as in the <code>boxxy</code> function in order to serialise that parameter, so the JavaScript binding does not run the animation function.</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb275-1" title="1"><span class="co"># pseudo code</span></a>
<a class="sourceLine" id="cb275-2" title="2"><span class="co"># do not do this</span></a>
<a class="sourceLine" id="cb275-3" title="3"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb275-4" title="4"></a>
<a class="sourceLine" id="cb275-5" title="5">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb275-6" title="6">  <span class="kw">boxxyOutput</span>(</a>
<a class="sourceLine" id="cb275-7" title="7">    <span class="st">&quot;countries&quot;</span>, </a>
<a class="sourceLine" id="cb275-8" title="8">    <span class="co"># do not import dependency</span></a>
<a class="sourceLine" id="cb275-9" title="9">    <span class="dt">animate =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb275-10" title="10">  )</a>
<a class="sourceLine" id="cb275-11" title="11">)</a>
<a class="sourceLine" id="cb275-12" title="12"></a>
<a class="sourceLine" id="cb275-13" title="13">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){</a>
<a class="sourceLine" id="cb275-14" title="14">  output<span class="op">$</span>countries &lt;-<span class="st"> </span><span class="kw">renderBoxxy</span>({</a>
<a class="sourceLine" id="cb275-15" title="15">    <span class="co"># do not animate the numbers</span></a>
<a class="sourceLine" id="cb275-16" title="16">    <span class="kw">boxxy</span>(<span class="st">&quot;Countries&quot;</span>, <span class="dv">95</span>, <span class="dt">animate =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb275-17" title="17">  })</a>
<a class="sourceLine" id="cb275-18" title="18">}</a>
<a class="sourceLine" id="cb275-19" title="19"></a>
<a class="sourceLine" id="cb275-20" title="20"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<p>Thankfully there is a better way, combining htmltools and Shiny to insert the dependency dynamically from JavaScript.</p>
<p>The <code>boxxy</code> function needs to take an additional argument <code>animate</code>, which is passed to the output list. This will be used in the <code>render</code> function (and JavaScript binding) to render the dependency dynamically.</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb276-1" title="1">boxxy &lt;-<span class="st"> </span><span class="cf">function</span>(title, value, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">animate =</span> <span class="ot">TRUE</span>){</a>
<a class="sourceLine" id="cb276-2" title="2">  <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb276-3" title="3">    <span class="dt">title =</span> title, <span class="dt">value =</span> value, <span class="dt">color =</span> color, <span class="dt">animate =</span> animate</a>
<a class="sourceLine" id="cb276-4" title="4">  )</a>
<a class="sourceLine" id="cb276-5" title="5">}</a></code></pre></div>
<p>The <code>boxxyOutput</code> function can be slightly simplified. It currently attaches the <code>countup.js</code> dependency, which needs to be removed.</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb277-1" title="1">boxxyOutput &lt;-<span class="st"> </span><span class="cf">function</span>(id){</a>
<a class="sourceLine" id="cb277-2" title="2">  el &lt;-<span class="st"> </span>shiny<span class="op">::</span>tags<span class="op">$</span><span class="kw">div</span>(</a>
<a class="sourceLine" id="cb277-3" title="3">    <span class="dt">id =</span> id, <span class="dt">class =</span> <span class="st">&quot;boxxy&quot;</span>,</a>
<a class="sourceLine" id="cb277-4" title="4">    <span class="kw">h1</span>(<span class="dt">id =</span> <span class="kw">sprintf</span>(<span class="st">&quot;%s-boxxy-value&quot;</span>, id), <span class="dt">class =</span> <span class="st">&quot;boxxy-value&quot;</span>),</a>
<a class="sourceLine" id="cb277-5" title="5">    <span class="kw">p</span>(<span class="dt">id =</span> <span class="kw">sprintf</span>(<span class="st">&quot;%s-boxxy-title&quot;</span>, id), <span class="dt">class =</span> <span class="st">&quot;boxxy-title&quot;</span>)</a>
<a class="sourceLine" id="cb277-6" title="6">  )</a>
<a class="sourceLine" id="cb277-7" title="7"></a>
<a class="sourceLine" id="cb277-8" title="8">  path &lt;-<span class="st"> </span><span class="kw">normalizePath</span>(<span class="st">&quot;assets&quot;</span>)</a>
<a class="sourceLine" id="cb277-9" title="9"></a>
<a class="sourceLine" id="cb277-10" title="10">  <span class="co"># only attach binding.js</span></a>
<a class="sourceLine" id="cb277-11" title="11">  deps &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb277-12" title="12">    htmltools<span class="op">::</span><span class="kw">htmlDependency</span>(</a>
<a class="sourceLine" id="cb277-13" title="13">      <span class="dt">name =</span> <span class="st">&quot;boxxy&quot;</span>,</a>
<a class="sourceLine" id="cb277-14" title="14">      <span class="dt">version =</span> <span class="st">&quot;1.0.0&quot;</span>,</a>
<a class="sourceLine" id="cb277-15" title="15">      <span class="dt">src =</span> <span class="kw">c</span>(<span class="dt">file =</span> path),</a>
<a class="sourceLine" id="cb277-16" title="16">      <span class="dt">script =</span> <span class="kw">c</span>(<span class="st">&quot;binding.js&quot;</span>),</a>
<a class="sourceLine" id="cb277-17" title="17">      <span class="dt">stylesheet =</span> <span class="st">&quot;styles.css&quot;</span></a>
<a class="sourceLine" id="cb277-18" title="18">    )</a>
<a class="sourceLine" id="cb277-19" title="19">  )</a>
<a class="sourceLine" id="cb277-20" title="20"></a>
<a class="sourceLine" id="cb277-21" title="21">  htmltools<span class="op">::</span><span class="kw">attachDependencies</span>(el, deps)</a>
<a class="sourceLine" id="cb277-22" title="22">}</a></code></pre></div>
<p>The <code>renderBoxxy</code> function sees some modifications, while before it was technically only returning a function that itself returned the output of <code>boxxy</code> (<code>func() == boxxy()</code>). Here we want to capture the output of <code>boxxy</code> to check whether the <code>animate</code> element is <code>TRUE</code> and, if so, add the dependency.</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb278-1" title="1">renderBoxxy &lt;-<span class="st"> </span><span class="cf">function</span>(expr, <span class="dt">env =</span> <span class="kw">parent.frame</span>(), </a>
<a class="sourceLine" id="cb278-2" title="2">  <span class="dt">quoted =</span> <span class="ot">FALSE</span>) {</a>
<a class="sourceLine" id="cb278-3" title="3">  <span class="co"># Convert the expression + environment into a function</span></a>
<a class="sourceLine" id="cb278-4" title="4">  func &lt;-<span class="st"> </span>shiny<span class="op">::</span><span class="kw">exprToFunction</span>(expr, env, quoted)</a>
<a class="sourceLine" id="cb278-5" title="5"></a>
<a class="sourceLine" id="cb278-6" title="6">  <span class="cf">function</span>(){</a>
<a class="sourceLine" id="cb278-7" title="7">    val &lt;-<span class="st"> </span><span class="kw">func</span>()</a>
<a class="sourceLine" id="cb278-8" title="8"></a>
<a class="sourceLine" id="cb278-9" title="9">    <span class="cf">if</span>(val<span class="op">$</span>animate){</a>
<a class="sourceLine" id="cb278-10" title="10">      <span class="co"># add dependency</span></a>
<a class="sourceLine" id="cb278-11" title="11">    }</a>
<a class="sourceLine" id="cb278-12" title="12"></a>
<a class="sourceLine" id="cb278-13" title="13">    <span class="kw">return</span>(val)</a>
<a class="sourceLine" id="cb278-14" title="14">  }</a>
<a class="sourceLine" id="cb278-15" title="15">}</a></code></pre></div>
<p>Within the <code>if</code> statement, the dependency can be created with the htmltools as done for the binding. Ensure the names of the dependencies are unique as shiny internally uses it to differentiate between them; if they bear the same name Shiny assumes they are the same and will only render one of them.</p>
<div class="rmdnote">
<p>
Make sure dependencies bear different names or Shiny thinks it’s the same and only renders one of them.
</p>
</div>
<p>The dependency generated with htmltools is then passed to the <code>shiny::createWebDependency</code> function, which internally uses <code>shiny::addResourcePath</code> to serve the dependency. This is necessary here as, at this stage, the countup dependency is not actually rendered; below we merely add it to the list of options that serialised to JSON. Indeed, this will actually be injected JavaScript-side. Therefore the front end needs to be able to access this file, hence it is served.</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb279-1" title="1">renderBoxxy &lt;-<span class="st"> </span><span class="cf">function</span>(expr, <span class="dt">env =</span> <span class="kw">parent.frame</span>(), </a>
<a class="sourceLine" id="cb279-2" title="2">  <span class="dt">quoted =</span> <span class="ot">FALSE</span>) {</a>
<a class="sourceLine" id="cb279-3" title="3">  <span class="co"># Convert the expression + environment into a function</span></a>
<a class="sourceLine" id="cb279-4" title="4">  func &lt;-<span class="st"> </span>shiny<span class="op">::</span><span class="kw">exprToFunction</span>(expr, env, quoted)</a>
<a class="sourceLine" id="cb279-5" title="5"></a>
<a class="sourceLine" id="cb279-6" title="6">  <span class="cf">function</span>(){</a>
<a class="sourceLine" id="cb279-7" title="7">    <span class="co"># evaluate to output list</span></a>
<a class="sourceLine" id="cb279-8" title="8">    val &lt;-<span class="st"> </span><span class="kw">func</span>()</a>
<a class="sourceLine" id="cb279-9" title="9"></a>
<a class="sourceLine" id="cb279-10" title="10">    <span class="co"># add dependency</span></a>
<a class="sourceLine" id="cb279-11" title="11">    <span class="cf">if</span>(val<span class="op">$</span>animate){</a>
<a class="sourceLine" id="cb279-12" title="12">      path &lt;-<span class="st"> </span><span class="kw">normalizePath</span>(<span class="st">&quot;assets&quot;</span>)</a>
<a class="sourceLine" id="cb279-13" title="13"></a>
<a class="sourceLine" id="cb279-14" title="14">      deps &lt;-<span class="st"> </span>htmltools<span class="op">::</span><span class="kw">htmlDependency</span>(</a>
<a class="sourceLine" id="cb279-15" title="15">        <span class="dt">name =</span> <span class="st">&quot;countup&quot;</span>, <span class="co"># change name</span></a>
<a class="sourceLine" id="cb279-16" title="16">        <span class="dt">version =</span> <span class="st">&quot;1.8.2&quot;</span>,</a>
<a class="sourceLine" id="cb279-17" title="17">        <span class="dt">src =</span> <span class="kw">c</span>(<span class="dt">file =</span> path),</a>
<a class="sourceLine" id="cb279-18" title="18">        <span class="dt">script =</span> <span class="kw">c</span>(<span class="st">&quot;countup.js&quot;</span>) <span class="co"># only countup</span></a>
<a class="sourceLine" id="cb279-19" title="19">      )</a>
<a class="sourceLine" id="cb279-20" title="20"></a>
<a class="sourceLine" id="cb279-21" title="21">      <span class="co"># serve dependency </span></a>
<a class="sourceLine" id="cb279-22" title="22">      val<span class="op">$</span>deps &lt;-<span class="st"> </span><span class="kw">list</span>(shiny<span class="op">::</span><span class="kw">createWebDependency</span>(deps))</a>
<a class="sourceLine" id="cb279-23" title="23">    }</a>
<a class="sourceLine" id="cb279-24" title="24"></a>
<a class="sourceLine" id="cb279-25" title="25">    <span class="kw">return</span>(val)</a>
<a class="sourceLine" id="cb279-26" title="26">  }</a>
<a class="sourceLine" id="cb279-27" title="27">}</a></code></pre></div>
<p>Thus far, the dependency is dynamically included in the R object; that is serialised to JSON, but it is not yet actually imported in the document—this happens in the JavaScript binding.</p>
<p>The first thing we ought to do is mirror the if-statement that was created in the <code>renderBoxxy</code> function. If the numbers should be animated, the function can use countup; if not, it must insert the text with <code>insertText</code> just like it does for the <code>title</code>.</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb280-1" title="1"><span class="kw">var</span> boxxyBinding <span class="op">=</span> <span class="kw">new</span> <span class="va">Shiny</span>.<span class="at">OutputBinding</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb280-2" title="2"></a>
<a class="sourceLine" id="cb280-3" title="3"><span class="va">$</span>.<span class="at">extend</span>(boxxyBinding<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb280-4" title="4">  <span class="dt">find</span><span class="op">:</span> <span class="kw">function</span>(scope) <span class="op">{</span></a>
<a class="sourceLine" id="cb280-5" title="5">    <span class="cf">return</span> <span class="at">$</span>(scope).<span class="at">find</span>(<span class="st">&quot;.boxxy&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb280-6" title="6">  <span class="op">},</span></a>
<a class="sourceLine" id="cb280-7" title="7">  <span class="dt">renderValue</span><span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> data) <span class="op">{</span></a>
<a class="sourceLine" id="cb280-8" title="8"></a>
<a class="sourceLine" id="cb280-9" title="9">    <span class="kw">let</span> boxValue<span class="op">,</span> boxTitle<span class="op">;</span></a>
<a class="sourceLine" id="cb280-10" title="10"></a>
<a class="sourceLine" id="cb280-11" title="11">    <span class="va">el</span>.<span class="va">style</span>.<span class="at">backgroundColor</span> <span class="op">=</span> <span class="va">data</span>.<span class="at">color</span><span class="op">;</span></a>
<a class="sourceLine" id="cb280-12" title="12"></a>
<a class="sourceLine" id="cb280-13" title="13">    <span class="cf">if</span>(<span class="va">data</span>.<span class="at">animate</span>)<span class="op">{</span></a>
<a class="sourceLine" id="cb280-14" title="14">      <span class="kw">var</span> counter <span class="op">=</span> <span class="kw">new</span> <span class="at">CountUp</span>(</a>
<a class="sourceLine" id="cb280-15" title="15">        <span class="va">el</span>.<span class="at">id</span> <span class="op">+</span> <span class="st">&#39;-boxxy-value&#39;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">data</span>.<span class="at">value</span></a>
<a class="sourceLine" id="cb280-16" title="16">      )<span class="op">;</span></a>
<a class="sourceLine" id="cb280-17" title="17">      <span class="va">counter</span>.<span class="at">start</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb280-18" title="18">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb280-19" title="19">      boxValue <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="va">el</span>.<span class="at">id</span> <span class="op">+</span> <span class="st">&#39;-boxxy-value&#39;</span>)</a>
<a class="sourceLine" id="cb280-20" title="20">      <span class="va">boxValue</span>.<span class="at">innerText</span> <span class="op">=</span> <span class="va">data</span>.<span class="at">value</span><span class="op">;</span></a>
<a class="sourceLine" id="cb280-21" title="21">    <span class="op">}</span></a>
<a class="sourceLine" id="cb280-22" title="22"></a>
<a class="sourceLine" id="cb280-23" title="23">    boxTitle <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="va">el</span>.<span class="at">id</span> <span class="op">+</span> <span class="st">&#39;-boxxy-title&#39;</span>)</a>
<a class="sourceLine" id="cb280-24" title="24">    <span class="va">boxTitle</span>.<span class="at">innerText</span> <span class="op">=</span> <span class="va">data</span>.<span class="at">title</span><span class="op">;</span></a>
<a class="sourceLine" id="cb280-25" title="25">  <span class="op">}</span></a>
<a class="sourceLine" id="cb280-26" title="26"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb280-27" title="27"></a>
<a class="sourceLine" id="cb280-28" title="28"><span class="va">Shiny</span>.<span class="va">outputBindings</span>.<span class="at">register</span>(boxxyBinding<span class="op">,</span> <span class="st">&quot;john.boxxy&quot;</span>)<span class="op">;</span></a></code></pre></div>
<p>Finally, we can render the dependency. The JavaScript method aptly named <code>renderDependencies</code> will do just that from the list of dependency created in <code>renderBoxxy</code>.</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb281-1" title="1"><span class="kw">var</span> boxxyBinding <span class="op">=</span> <span class="kw">new</span> <span class="va">Shiny</span>.<span class="at">OutputBinding</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb281-2" title="2"></a>
<a class="sourceLine" id="cb281-3" title="3"><span class="va">$</span>.<span class="at">extend</span>(boxxyBinding<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb281-4" title="4">  <span class="dt">find</span><span class="op">:</span> <span class="kw">function</span>(scope) <span class="op">{</span></a>
<a class="sourceLine" id="cb281-5" title="5">    <span class="cf">return</span> <span class="at">$</span>(scope).<span class="at">find</span>(<span class="st">&quot;.boxxy&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb281-6" title="6">  <span class="op">},</span></a>
<a class="sourceLine" id="cb281-7" title="7">  <span class="dt">renderValue</span><span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> data) <span class="op">{</span></a>
<a class="sourceLine" id="cb281-8" title="8"></a>
<a class="sourceLine" id="cb281-9" title="9">    <span class="kw">let</span> boxValue<span class="op">,</span> boxTitle<span class="op">;</span></a>
<a class="sourceLine" id="cb281-10" title="10"></a>
<a class="sourceLine" id="cb281-11" title="11">    <span class="va">el</span>.<span class="va">style</span>.<span class="at">backgroundColor</span> <span class="op">=</span> <span class="va">data</span>.<span class="at">color</span><span class="op">;</span></a>
<a class="sourceLine" id="cb281-12" title="12"></a>
<a class="sourceLine" id="cb281-13" title="13">    <span class="cf">if</span>(<span class="va">data</span>.<span class="at">animate</span>)<span class="op">{</span></a>
<a class="sourceLine" id="cb281-14" title="14">      <span class="va">Shiny</span>.<span class="at">renderDependencies</span>(<span class="va">data</span>.<span class="at">deps</span>)<span class="op">;</span> <span class="co">// render dependency</span></a>
<a class="sourceLine" id="cb281-15" title="15">      <span class="kw">var</span> counter <span class="op">=</span> <span class="kw">new</span> <span class="at">CountUp</span>(</a>
<a class="sourceLine" id="cb281-16" title="16">        <span class="va">el</span>.<span class="at">id</span> <span class="op">+</span> <span class="st">&#39;-boxxy-value&#39;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">data</span>.<span class="at">value</span></a>
<a class="sourceLine" id="cb281-17" title="17">      )<span class="op">;</span></a>
<a class="sourceLine" id="cb281-18" title="18">      <span class="va">counter</span>.<span class="at">start</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb281-19" title="19">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb281-20" title="20">      boxValue <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="va">el</span>.<span class="at">id</span> <span class="op">+</span> <span class="st">&#39;-boxxy-value&#39;</span>)</a>
<a class="sourceLine" id="cb281-21" title="21">      <span class="va">boxValue</span>.<span class="at">innerText</span> <span class="op">=</span> <span class="va">data</span>.<span class="at">value</span><span class="op">;</span></a>
<a class="sourceLine" id="cb281-22" title="22">    <span class="op">}</span></a>
<a class="sourceLine" id="cb281-23" title="23"></a>
<a class="sourceLine" id="cb281-24" title="24">    boxTitle <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="va">el</span>.<span class="at">id</span> <span class="op">+</span> <span class="st">&#39;-boxxy-title&#39;</span>)</a>
<a class="sourceLine" id="cb281-25" title="25">    <span class="va">boxTitle</span>.<span class="at">innerText</span> <span class="op">=</span> <span class="va">data</span>.<span class="at">title</span><span class="op">;</span></a>
<a class="sourceLine" id="cb281-26" title="26">  <span class="op">}</span></a>
<a class="sourceLine" id="cb281-27" title="27"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb281-28" title="28"></a>
<a class="sourceLine" id="cb281-29" title="29"><span class="va">Shiny</span>.<span class="va">outputBindings</span>.<span class="at">register</span>(boxxyBinding<span class="op">,</span> <span class="st">&quot;john.boxxy&quot;</span>)<span class="op">;</span></a></code></pre></div>
<p>With those changes made, not only is the animation of numbers optional, but if users decide to turn off the animation in all <code>boxxy</code> functions, the <code>countup.js</code> file will not be included at all.</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb282-1" title="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb282-2" title="2"></a>
<a class="sourceLine" id="cb282-3" title="3">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb282-4" title="4">  <span class="kw">h2</span>(<span class="st">&quot;Custom outputs&quot;</span>),</a>
<a class="sourceLine" id="cb282-5" title="5">  <span class="kw">fluidRow</span>(</a>
<a class="sourceLine" id="cb282-6" title="6">    <span class="kw">column</span>(</a>
<a class="sourceLine" id="cb282-7" title="7">      <span class="dv">3</span>, <span class="kw">boxxyOutput</span>(<span class="st">&quot;countries&quot;</span>)</a>
<a class="sourceLine" id="cb282-8" title="8">    ),</a>
<a class="sourceLine" id="cb282-9" title="9">    <span class="kw">column</span>(</a>
<a class="sourceLine" id="cb282-10" title="10">      <span class="dv">3</span>, <span class="kw">boxxyOutput</span>(<span class="st">&quot;employees&quot;</span>)</a>
<a class="sourceLine" id="cb282-11" title="11">    )</a>
<a class="sourceLine" id="cb282-12" title="12">  )</a>
<a class="sourceLine" id="cb282-13" title="13">)</a>
<a class="sourceLine" id="cb282-14" title="14"></a>
<a class="sourceLine" id="cb282-15" title="15">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){</a>
<a class="sourceLine" id="cb282-16" title="16">  output<span class="op">$</span>countries &lt;-<span class="st"> </span><span class="kw">renderBoxxy</span>({</a>
<a class="sourceLine" id="cb282-17" title="17">    <span class="kw">boxxy</span>(<span class="st">&quot;Countries&quot;</span>, <span class="dv">176</span>, <span class="dt">animate =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb282-18" title="18">  })</a>
<a class="sourceLine" id="cb282-19" title="19"></a>
<a class="sourceLine" id="cb282-20" title="20">  output<span class="op">$</span>employees &lt;-<span class="st"> </span><span class="kw">renderBoxxy</span>({</a>
<a class="sourceLine" id="cb282-21" title="21">    <span class="kw">boxxy</span>(<span class="st">&quot;Thing&quot;</span>, <span class="dv">67</span>, <span class="dt">animate =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb282-22" title="22">  })</a>
<a class="sourceLine" id="cb282-23" title="23">}</a>
<a class="sourceLine" id="cb282-24" title="24"></a>
<a class="sourceLine" id="cb282-25" title="25"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
</div>
<div id="shiny-output-preprocess" class="section level2">
<h2><span class="header-section-number">14.9</span> Preprocessing Custom Outputs</h2>
<p>One aspect that this example did not truly explore thus far is the idea that the function <code>boxxy</code> should preprocess the input more in order to be truly justified. Currently <code>boxxy</code> only wraps the arguments in a <code>list</code>. Therefore, the code below works too.</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb283-1" title="1"><span class="co"># works too</span></a>
<a class="sourceLine" id="cb283-2" title="2">output<span class="op">$</span>theId &lt;-<span class="st"> </span><span class="kw">renderBoxxy</span>({</a>
<a class="sourceLine" id="cb283-3" title="3">  <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb283-4" title="4">    <span class="dt">title =</span> <span class="st">&quot;The Title&quot;</span>, </a>
<a class="sourceLine" id="cb283-5" title="5">    <span class="dt">value =</span> <span class="dv">123</span>, </a>
<a class="sourceLine" id="cb283-6" title="6">    <span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>, </a>
<a class="sourceLine" id="cb283-7" title="7">    <span class="dt">animate =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb283-8" title="8">  )</a>
<a class="sourceLine" id="cb283-9" title="9">})</a></code></pre></div>
<p>One the things <code>boxxy</code> could do is preprocess the input for instance. Instead of accepting a vector of length one for the <code>value</code> argument, it takes the sum of it to allow vectors of any length and dynamically changes the <code>color</code> depending on <code>value</code>.</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb284-1" title="1">boxxy &lt;-<span class="st"> </span><span class="cf">function</span>(title, value, <span class="dt">color =</span> <span class="ot">NULL</span>, <span class="dt">animate =</span> <span class="ot">TRUE</span>){</a>
<a class="sourceLine" id="cb284-2" title="2"></a>
<a class="sourceLine" id="cb284-3" title="3">  <span class="co"># sum the vector</span></a>
<a class="sourceLine" id="cb284-4" title="4">  value &lt;-<span class="st"> </span><span class="kw">sum</span>(value)</a>
<a class="sourceLine" id="cb284-5" title="5"></a>
<a class="sourceLine" id="cb284-6" title="6">  <span class="co"># dynamic color</span></a>
<a class="sourceLine" id="cb284-7" title="7">  <span class="cf">if</span>(<span class="kw">is.null</span>(color))</a>
<a class="sourceLine" id="cb284-8" title="8">    <span class="cf">if</span>(value <span class="op">&gt;</span><span class="st"> </span><span class="dv">100</span>)</a>
<a class="sourceLine" id="cb284-9" title="9">      color &lt;-<span class="st"> &quot;#ef476f&quot;</span></a>
<a class="sourceLine" id="cb284-10" title="10">    <span class="cf">else</span></a>
<a class="sourceLine" id="cb284-11" title="11">      color &lt;-<span class="st"> &quot;#06d6a0&quot;</span></a>
<a class="sourceLine" id="cb284-12" title="12"></a>
<a class="sourceLine" id="cb284-13" title="13">  <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb284-14" title="14">    <span class="dt">title =</span> title, </a>
<a class="sourceLine" id="cb284-15" title="15">    <span class="dt">value =</span> value, </a>
<a class="sourceLine" id="cb284-16" title="16">    <span class="dt">color =</span> color, </a>
<a class="sourceLine" id="cb284-17" title="17">    <span class="dt">animate =</span> animate</a>
<a class="sourceLine" id="cb284-18" title="18">  )</a>
<a class="sourceLine" id="cb284-19" title="19">}</a></code></pre></div>
<p>This means boxxy could be used like so: <code>boxxy("Total", c(1,6,9))</code>.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-shinydashboard">
<p>Chang, Winston, and Barbara Borges Ribeiro. 2018. <em>Shinydashboard: Create Dashboards with ’Shiny’</em>. <a href="https://CRAN.R-project.org/package=shinydashboard">https://CRAN.R-project.org/package=shinydashboard</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="shiny-tips.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="shiny-input.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/JohnCoene/javascript-for-r/edit/master/4-15-shiny-output.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
